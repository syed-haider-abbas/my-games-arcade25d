import{P as c,c as Z,p as S,u as E,r as N,j as e,R as ee,B as C,V as K}from"./index-Dal3CgWx.js";import{B as y,a as v,W as G,A as T,D as H,b as F,C as R}from"./constants-CIfkAITU.js";var b=(t=>(t.IDLE="IDLE",t.PLAYING="PLAYING",t.WON="WON",t.DRAW="DRAW",t))(b||{});const q=()=>{const t=new Set;for(;t.size<y*v;)t.add(Math.floor(Math.random()*99)+1);const a=Array.from(t).sort(()=>Math.random()-.5),s=[];for(let l=0;l<y;l++){const d=[];for(let n=0;n<v;n++)d.push({row:l,col:n,value:a[l*v+n],owner:null,isWinningCell:!1});s.push(d)}return s},O=(t,a)=>{for(let s=y-1;s>=0;s--)if(t[s][a].owner===null)return s;return-1},J=t=>{const a=[[0,1],[1,0],[1,1],[1,-1]];for(let s=0;s<y;s++)for(let l=0;l<v;l++){const d=t[s][l].owner;if(d)for(const[n,r]of a){let o=1;const i=[{row:s,col:l}];for(let m=1;m<G;m++){const x=s+n*m,p=l+r*m;if(x>=0&&x<y&&p>=0&&p<v&&t[x][p].owner===d)o++,i.push({row:x,col:p});else break}if(o>=G)return{winner:d,winningCells:i}}}return{winner:null,winningCells:[]}},te=t=>t[0].every(a=>a.owner!==null),se=3,_=(t,a)=>{let s=0;a===c.ONE?c.TWO:c.ONE;let l=0,d=0,n=0;for(const r of t)r===a?l++:r===null?d++:n++;return l===4?s+=100:l===3&&d===1?s+=5:l===2&&d===2&&(s+=2),n===3&&d===1&&(s-=4),s},ne=(t,a)=>{let s=0;for(let n=0;n<y;n++)for(let r=0;r<v-3;r++){const o=[t[n][r].owner,t[n][r+1].owner,t[n][r+2].owner,t[n][r+3].owner];s+=_(o,a)}for(let n=0;n<v;n++)for(let r=0;r<y-3;r++){const o=[t[r][n].owner,t[r+1][n].owner,t[r+2][n].owner,t[r+3][n].owner];s+=_(o,a)}for(let n=0;n<y-3;n++)for(let r=0;r<v-3;r++){const o=[t[n][r].owner,t[n+1][r+1].owner,t[n+2][r+2].owner,t[n+3][r+3].owner];s+=_(o,a)}for(let n=0;n<y-3;n++)for(let r=0;r<v-3;r++){const o=[t[n+3][r].owner,t[n+2][r+1].owner,t[n+1][r+2].owner,t[n][r+3].owner];s+=_(o,a)}const l=Math.floor(v/2);let d=0;for(let n=0;n<y;n++)t[n][l].owner===a&&d++;return s+=d*3,s},A=(t,a,s,l,d,n)=>{const r=n===c.ONE?c.TWO:c.ONE,o=J(t);if(o.winner===n)return 1e5;if(o.winner===r)return-1e5;if(t[0].every(i=>i.owner!==null))return 0;if(a===0)return ne(t,n);if(d){let i=-1/0;for(let m=0;m<v;m++){const x=O(t,m);if(x!==-1){const p=t.map(u=>u.map(k=>({...k})));p[x][m].owner=n;const f=A(p,a-1,s,l,!1,n);if(i=Math.max(i,f),s=Math.max(s,i),s>=l)break}}return i}else{let i=1/0;for(let m=0;m<v;m++){const x=O(t,m);if(x!==-1){const p=t.map(u=>u.map(k=>({...k})));p[x][m].owner=r;const f=A(p,a-1,s,l,!0,n);if(i=Math.min(i,f),l=Math.min(l,i),l<=s)break}}return i}},ae=(t,a)=>{let s=-1/0,l=Math.floor(v/2);const d=[];for(let n=0;n<v;n++)O(t,n)!==-1&&d.push(n);d.sort(()=>Math.random()-.5);for(const n of d){const r=O(t,n),o=t.map(m=>m.map(x=>({...x})));o[r][n].owner=a;const i=A(o,se,-1/0,1/0,!1,a);i>s&&(s=i,l=n)}return l},X="connect4-state-v1",M=t=>{if(typeof window<"u"){const{board:a,turn:s,status:l,winner:d,winningLine:n,players:r,gameMode:o,botStats:i,pvpStats:m,themeId:x,characterSetId:p}=t,f={board:a,turn:s,status:l,winner:d,winningLine:n,players:r,gameMode:o,botStats:i,pvpStats:m,themeId:x,characterSetId:p};window.localStorage.setItem(X,JSON.stringify(f))}},re=()=>{const t={status:b.IDLE,gameMode:"PVP",themeId:"KIDS",characterSetId:T[0].id,turn:c.ONE,board:q(),winner:null,winningLine:[],players:{[c.ONE]:{id:c.ONE,name:"Player 1",score:0},[c.TWO]:{id:c.TWO,name:"Player 2",score:0}},botStats:{playerWins:0,botWins:0},pvpStats:{player1Wins:0,player2Wins:0},hasSavedGame:!1,isBotThinking:!1};if(typeof window<"u")try{const a=window.localStorage.getItem(X);if(a){const s=JSON.parse(a);if(s.botStats&&(t.botStats=s.botStats),s.pvpStats&&(t.pvpStats=s.pvpStats),s.gameMode&&(t.gameMode=s.gameMode),s.themeId&&(t.themeId=s.themeId),s.characterSetId&&(t.characterSetId=s.characterSetId),s.status===b.PLAYING)return{...t,...s,status:b.IDLE,hasSavedGame:!0,isDropping:!1,isBotThinking:!1,pendingColumn:null}}}catch(a){console.warn("Failed to load Connect 4 state",a)}return t},w=Z((t,a)=>({...re(),pendingColumn:null,isDropping:!1,startGame:(s="PVP")=>{S("start");const{players:l,botStats:d,pvpStats:n}=a(),r={...l};if(s==="PVB")r[c.ONE]={...r[c.ONE],name:"You",score:d.playerWins},r[c.TWO]={...r[c.TWO],name:"Bot",score:d.botWins};else{const i=E.getState().players;r[c.ONE]={...r[c.ONE],name:i[c.ONE].name,score:n.player1Wins},r[c.TWO]={...r[c.TWO],name:i[c.TWO].name,score:n.player2Wins}}const o={status:b.PLAYING,gameMode:s,board:q(),winner:null,winningLine:[],turn:c.ONE,pendingColumn:null,isDropping:!1,isBotThinking:!1,hasSavedGame:!1,players:r};t(o),M({...a(),...o})},setTheme:s=>{S("click"),t({themeId:s}),M({...a(),themeId:s})},setCharacterSet:s=>{S("click"),t({characterSetId:s}),M({...a(),characterSetId:s})},resumeGame:()=>{S("click"),t({status:b.PLAYING});const{turn:s,gameMode:l}=a();l==="PVB"&&s===c.TWO&&setTimeout(()=>a().dropToken(-1),500)},resetGame:()=>{S("click"),t({status:b.IDLE,hasSavedGame:a().status===b.PLAYING,pendingColumn:null,isDropping:!1,isBotThinking:!1})},setPendingColumn:s=>{t({pendingColumn:s})},dropToken:s=>{const{board:l,turn:d,status:n,isDropping:r,gameMode:o,isBotThinking:i}=a();if(n!==b.PLAYING||r)return;let m=s;if(o==="PVB"&&d===c.TWO){if(i||s!==-1)return;t({isBotThinking:!0}),setTimeout(()=>{const p=ae(l,c.TWO),{isDropping:f}=a();if(!f){t({isBotThinking:!1});const u=O(l,p);if(u===-1)return;V(p,u)}},600);return}const x=O(l,m);x!==-1&&V(m,x)},checkWin:()=>{const{board:s,turn:l,players:d,gameMode:n,botStats:r,pvpStats:o}=a(),i=J(s);let m={};if(i.winner){S("win");const x=s.map(k=>k.map(g=>({...g})));i.winningCells.forEach(({row:k,col:g})=>{x[k][g].isWinningCell=!0});const p={...d};p[i.winner].score+=1;let f=r,u=o;n==="PVB"?(i.winner===c.ONE&&(f={...r,playerWins:r.playerWins+1}),i.winner===c.TWO&&(f={...r,botWins:r.botWins+1})):(i.winner===c.ONE&&(u={...o,player1Wins:o.player1Wins+1}),i.winner===c.TWO&&(u={...o,player2Wins:o.player2Wins+1})),m={status:b.WON,winner:i.winner,winningLine:i.winningCells,board:x,players:p,botStats:f,pvpStats:u,pendingColumn:null,hasSavedGame:!1}}else if(te(s))m={status:b.DRAW,hasSavedGame:!1};else{const x=l===c.ONE?c.TWO:c.ONE;m={turn:x},n==="PVB"&&x===c.TWO&&setTimeout(()=>a().dropToken(-1),100)}t(m),M({...a(),...m})},syncPlayers:s=>{t(l=>l.gameMode==="PVB"?{players:{[c.ONE]:{...l.players[c.ONE],name:"You"},[c.TWO]:{...l.players[c.TWO],name:"Bot"}}}:{players:{[c.ONE]:{...l.players[c.ONE],name:s[c.ONE].name},[c.TWO]:{...l.players[c.TWO],name:s[c.TWO].name}}})}})),V=(t,a)=>{const s=w.getState(),{board:l,turn:d}=s,n=H+a*F;S("tap"),w.setState({isDropping:!0,pendingColumn:null});const r=l.map(o=>o.map(i=>({...i})));r[a][t].owner=d,w.setState({board:r}),M({...s,board:r}),setTimeout(()=>{S("drop"),w.getState().checkWin(),w.setState({isDropping:!1})},n)},le=N.memo(({data:t,colIndex:a,onColumnClick:s,isValidTarget:l,previewPlayerId:d,theme:n,customIcon:r})=>{const{owner:o,value:i,isWinningCell:m,row:x}=t,p=o||d,f=p?n.players[p]:null,u=!o&&!!d,k=r||(f==null?void 0:f.icon),g=!!k,I="text-[clamp(12px,4vmin,32px)] leading-none",P=!u&&o?{"--drop-offset":`calc(${(x+1.5)*-110}%)`,animationDuration:`${H+x*F}ms`,zIndex:50,willChange:"transform"}:void 0,D=`
    relative 
    w-full max-h-full
    aspect-square
    rounded-full 
    ${n.cell.base}
    shadow-[inset_0_8px_8px_-4px_rgba(0,0,0,0.3),_inset_0_3px_5px_rgba(0,0,0,0.1)]
    dark:shadow-[inset_0_8px_12px_-4px_rgba(0,0,0,0.8),_inset_0_2px_4px_rgba(0,0,0,0.5)]
    flex items-center justify-center 
    transition-all duration-300
    ${u?`ring-2 ${n.cell.ring}`:""}
  `;return e.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:D,style:{containerType:"size"},children:[!o&&e.jsx("div",{className:`absolute inset-0 flex items-center justify-center select-none ${u?"opacity-20":""}`,children:e.jsx("span",{className:`text-slate-400 dark:text-slate-600 font-bold ${I} drop-shadow-sm opacity-50`,children:i})}),p&&f&&e.jsxs(e.Fragment,{children:[u&&e.jsx("div",{className:`
                    absolute inset-0 rounded-full
                    ${g?"bg-white/20":`bg-gradient-to-br ${f.gradient}`}
                    opacity-50
                    animate-ping
                 `}),e.jsxs("div",{style:P,className:`
                absolute 
                flex items-center justify-center
                ${u?"opacity-90 scale-90 z-10":"animate-drop-rotate"}
                
                ${g?"inset-[-5%] z-20":`inset-[10%] rounded-full bg-gradient-to-br ${f.gradient} shadow-[inset_0_2px_3px_rgba(255,255,255,0.4),_inset_0_-3px_3px_rgba(0,0,0,0.3)] border border-black/10`}
              `,children:[!u&&!g&&e.jsx("div",{className:"absolute top-[10%] left-[10%] w-[30%] h-[15%] bg-white/30 rounded-full blur-[1px]"}),g?e.jsx("span",{className:`
                            select-none transform transition-transform leading-none
                            ${m?"animate-pulse scale-110":""}
                        `,style:{fontSize:"90cqmin"},children:k}):e.jsx("span",{className:`text-white font-extrabold ${I} drop-shadow-[0_1px_2px_rgba(0,0,0,0.3)]`,children:i})]})]}),m&&!g&&e.jsx("div",{className:"absolute inset-0 rounded-full ring-4 ring-white/60 animate-pulse z-20 shadow-[0_0_20px_rgba(255,255,255,0.5)]"})]})})},(t,a)=>t.data===a.data&&t.isValidTarget===a.isValidTarget&&t.previewPlayerId===a.previewPlayerId&&t.colIndex===a.colIndex&&t.theme.name===a.theme.name&&t.customIcon===a.customIcon),oe=N.memo(({colIndex:t,isInteractable:a,isPending:s,onClick:l,onMouseEnter:d})=>e.jsx("div",{className:`
      flex-1 h-full 
      hover:bg-black/5 dark:hover:bg-white/5 
      transition-colors 
      cursor-pointer
      rounded-lg
      ${a?"pointer-events-auto":"pointer-events-none"}
      ${s?"bg-black/5 dark:bg-white/5 ring-1 ring-indigo-400/30":""}
    `,onClick:l,onMouseEnter:d,title:"Tap to drop",role:"button",tabIndex:a?0:-1,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&a&&l()}})),ie=N.memo(()=>{const t=w(h=>h.board),a=w(h=>h.dropToken),s=w(h=>h.status),l=w(h=>h.turn),d=w(h=>h.pendingColumn),n=w(h=>h.setPendingColumn),r=w(h=>h.isDropping),o=w(h=>h.themeId),i=w(h=>h.characterSetId),m=E(h=>h.enableTilt),x=R[o],p=N.useMemo(()=>T.find(h=>h.id===i)||T[0],[i]),[f,u]=N.useState(null),k=s===b.PLAYING&&!r,g=f,I=N.useCallback(h=>{const j=w.getState();j.status!==b.PLAYING||j.isDropping||(a(h),u(null))},[a,n]),P=N.useCallback(h=>{u(h)},[]),D=N.useCallback(()=>{u(null)},[]),Q=N.useMemo(()=>g!==null?O(t,g):-1,[t,g]),U=N.useMemo(()=>Array.from({length:v},(h,j)=>({onClick:()=>I(j),onMouseEnter:()=>P(j)})),[I,P]);return e.jsx("div",{className:"relative group w-full h-full flex items-center justify-center p-4 perspective-1000",children:e.jsxs("div",{className:`
          relative
          ${x.board.background}
          rounded-2xl
          p-2 sm:p-3
          ${x.board.shadow}
          ring-1 ${x.board.border}
          transition-all duration-500 ease-out
          flex flex-col
          overflow-hidden
        `,style:{width:"100%",maxWidth:"100%",aspectRatio:"1/1",transform:m?"rotateX(5deg)":"none"},children:[["top-2 left-2","top-2 right-2","bottom-2 left-2","bottom-2 right-2"].map(h=>e.jsx("div",{className:`absolute ${h} w-1.5 h-1.5 sm:w-2.5 sm:h-2.5 rounded-full ${x.board.screws} shadow-[inset_0_1px_1px_rgba(0,0,0,0.1)] dark:shadow-[inset_0_1px_1px_rgba(255,255,255,0.1)] z-10`},h)),e.jsxs("div",{className:"grid gap-1 sm:gap-2 w-full h-full relative",style:{gridTemplateColumns:`repeat(${v}, minmax(0, 1fr))`,gridTemplateRows:`repeat(${y}, minmax(0, 1fr))`,touchAction:"none"},onMouseLeave:D,children:[t.map((h,j)=>e.jsx(ee.Fragment,{children:h.map((B,$)=>{const L=k&&$===g&&j===Q;let W;return o==="KIDS"&&(B.owner===c.ONE?W=p.p1:B.owner===c.TWO?W=p.p2:L&&l===c.ONE?W=p.p1:L&&l===c.TWO&&(W=p.p2)),e.jsx("div",{className:"flex items-center justify-center w-full h-full min-h-0 min-w-0",children:e.jsx(le,{data:B,colIndex:$,onColumnClick:I,isValidTarget:!0,previewPlayerId:L?l:null,theme:x,customIcon:W})},`${j}-${$}`)})},j)),e.jsx("div",{className:"absolute inset-0 z-30 flex gap-1 sm:gap-2 pointer-events-none h-full w-full",children:U.map((h,j)=>e.jsx(oe,{colIndex:j,isInteractable:k,isPending:d===j,onClick:h.onClick,onMouseEnter:h.onMouseEnter},j))})]}),m&&e.jsx("div",{className:"absolute -z-10 -bottom-4 left-4 right-4 h-6 bg-slate-300 dark:bg-slate-800 rounded-b-2xl transform skew-x-12 opacity-80 shadow-2xl"})]})})}),z=N.memo(({playerId:t,alignment:a})=>{const s=w(u=>u.players[t]),l=w(u=>u.turn),d=w(u=>u.winner),n=w(u=>u.themeId),r=w(u=>u.characterSetId),o=R[n].players[t],i=N.useMemo(()=>T.find(u=>u.id===r)||T[0],[r]),m=l===t,x=d===t,p=a==="right",f=n==="KIDS"?t===c.ONE?i.p1:i.p2:o.icon;return e.jsxs("div",{className:`
        flex items-center gap-3 md:gap-4
        transition-all duration-300
        ${p?"flex-row-reverse text-right":"flex-row text-left"}
        ${m?"opacity-100 scale-105":"opacity-50 grayscale-[0.5] scale-100"}
      `,children:[e.jsxs("div",{className:`
          relative
          w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl
          flex items-center justify-center
          bg-gradient-to-br ${o.gradient}
          shadow-lg ${m?o.shadowColor:"shadow-none"}
          border-2 ${m?"border-white":"border-transparent"}
          transition-all duration-300
        `,children:[f?e.jsx("span",{className:"text-xl md:text-3xl filter drop-shadow-sm select-none",children:f}):e.jsx("span",{className:"text-lg md:text-2xl font-black text-white select-none",children:s.name[0]}),x&&e.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:"ðŸ‘‘"})]}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("h2",{className:`text-sm md:text-lg font-bold ${o.textColor} dark:text-white leading-tight transition-colors`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("div",{className:`
               px-2 py-0.5 rounded-md 
               bg-slate-200 border border-slate-300 text-slate-600
               dark:bg-slate-800/80 dark:border-slate-700 dark:text-slate-300
               text-[10px] md:text-xs font-mono
               transition-colors
             `,children:["Score: ",e.jsx("span",{className:"text-slate-900 dark:text-white font-bold",children:s.score})]}),m&&!d&&e.jsx("div",{className:`
                 hidden sm:block px-2 py-0.5 rounded-full 
                 ${o.color} text-white 
                 text-[10px] font-bold uppercase tracking-wider animate-pulse
               `,children:"Turn"})]})]})]})}),ce=()=>{const{status:t,winner:a,startGame:s,resetGame:l,players:d,gameMode:n,themeId:r}=w(),{setView:o}=E(),[i,m]=N.useState(!1);if(N.useEffect(()=>{t===b.WON||t===b.DRAW?m(!0):m(!1)},[t]),!i||t!==b.WON&&t!==b.DRAW)return null;const x=a?R[r].players[a]:null,p=()=>{l(),o(K.HOME)},f=()=>{s(n)},u=a?d[a].name:"";return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-[2px] transition-opacity duration-300",onClick:()=>m(!1)}),e.jsxs("div",{className:"relative bg-white/50 dark:bg-slate-800/50 backdrop-blur-xl rounded-3xl p-8 max-w-md w-full text-center shadow-2xl border border-white/40 dark:border-slate-700/40 animate-bounce-in transform transition-all duration-300",children:[e.jsx("button",{onClick:()=>m(!1),className:"absolute top-4 right-4 p-2 text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white transition-colors bg-white/50 dark:bg-black/20 rounded-full",title:"Close to View Board",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),t===b.WON&&x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`mx-auto w-24 h-24 rounded-full bg-gradient-to-br ${x.gradient} flex items-center justify-center mb-6 shadow-xl`,children:e.jsx("span",{className:"text-5xl",children:"ðŸ†"})}),e.jsxs("h2",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 uppercase tracking-tight drop-shadow-sm",children:[u," Wins!"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-8 font-medium",children:"A spectacular victory on the grid."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto w-24 h-24 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-5xl",children:"ðŸ¤"})}),e.jsx("h2",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 drop-shadow-sm",children:"Draw!"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-8 font-medium",children:"The board is full. No more moves."})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(C,{onClick:f,size:"lg",className:"w-full shadow-lg !bg-indigo-600 hover:!bg-indigo-500",children:"Play Again"}),e.jsx(C,{onClick:p,variant:"secondary",className:"w-full !bg-white/50 dark:!bg-black/20 hover:!bg-white/80 dark:hover:!bg-black/40",children:"Back to Menu"})]})]})]})},Y=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),de=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),me=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),he=()=>{const{status:t,startGame:a,resumeGame:s,resetGame:l,syncPlayers:d,hasSavedGame:n,gameMode:r,themeId:o,setTheme:i,characterSetId:m,setCharacterSet:x}=w(),{setView:p,players:f}=E();N.useEffect(()=>{d(f)},[f,d]);const u=()=>{l(),p(K.HOME)},k=()=>{l()};return t===b.IDLE?e.jsxs("div",{className:"flex flex-col h-screen w-full bg-slate-50 dark:bg-[#0f172a] text-slate-900 dark:text-white relative overflow-hidden transition-colors duration-500",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-40",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-400/20 dark:bg-indigo-900/20 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-amber-400/20 dark:bg-amber-900/20 rounded-full blur-[100px]"})]}),e.jsx("header",{className:"shrink-0 h-16 md:h-20 px-4 md:px-8 flex items-center justify-center z-30 bg-white/50 dark:bg-slate-900/50 backdrop-blur-md sticky top-0 border-b border-slate-200/50 dark:border-white/5",children:e.jsx(C,{variant:"icon",size:"sm",onClick:u,title:"Return to Menu",children:e.jsx(Y,{})})}),e.jsx("div",{className:"flex-1 w-full overflow-y-auto p-4 md:p-8 pb-24",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 text-center relative z-20",children:[e.jsxs("div",{className:"space-y-4 animate-fade-in pt-4",children:[e.jsx("div",{className:`
                              inline-flex items-center justify-center w-24 h-24 rounded-[2rem] shadow-2xl mb-4 rotate-6 border-[6px] 
                              ${o==="KIDS"?"bg-indigo-50 border-indigo-200 dark:bg-slate-800 dark:border-slate-700":"bg-white dark:bg-slate-800 border-rose-500"}
                              transition-colors duration-300
                          `,children:e.jsx("span",{className:"text-6xl",children:o==="KIDS"?"ðŸ»":"ðŸ”´"})}),e.jsx("h1",{className:"text-5xl md:text-6xl font-black text-slate-900 dark:text-white tracking-tighter drop-shadow-sm",children:"Connect 4"}),e.jsx("p",{className:"text-lg md:text-xl text-slate-600 dark:text-slate-400 font-medium max-w-lg mx-auto leading-relaxed",children:"Drop pieces to connect four in a row. Simple rules, deep strategy."})]}),n&&e.jsxs("div",{className:"animate-pop",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-xl border-l-8 border-indigo-500 flex flex-col sm:flex-row items-center justify-between gap-6 max-w-2xl mx-auto ring-1 ring-slate-900/5",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white",children:"Game in Progress"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Resume your match"})]}),e.jsx(C,{onClick:s,size:"lg",className:"w-full sm:w-auto !bg-indigo-500 hover:!bg-indigo-400 whitespace-nowrap !rounded-xl !py-4 !px-8 text-lg shadow-lg shadow-indigo-500/30",children:"Continue Game"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-8 mb-4 max-w-2xl mx-auto",children:[e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Or Start New Game"}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-slate-200 dark:bg-slate-800 p-1.5 rounded-2xl inline-flex shadow-inner",children:[e.jsx("button",{onClick:()=>i("KIDS"),className:`
                                      px-6 py-2.5 rounded-xl text-sm font-bold uppercase tracking-wider transition-all
                                      ${o==="KIDS"?"bg-indigo-500 text-white shadow-md transform scale-105":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}
                                  `,children:"ðŸ§¸ Kiddo"}),e.jsx("button",{onClick:()=>i("STANDARD"),className:`
                                      px-6 py-2.5 rounded-xl text-sm font-bold uppercase tracking-wider transition-all
                                      ${o==="STANDARD"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-md transform scale-105":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}
                                  `,children:"ðŸ”´ Classic"})]})}),o==="KIDS"&&e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Choose Characters"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:T.map(g=>e.jsxs("button",{onClick:()=>x(g.id),className:`
                                              group flex flex-col items-center gap-2 p-4 rounded-2xl border-2 transition-all
                                              ${m===g.id?"bg-indigo-50 dark:bg-indigo-900/30 border-indigo-500 shadow-md transform scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-700"}
                                          `,children:[e.jsxs("div",{className:"flex items-center gap-2 text-4xl group-hover:scale-110 transition-transform",children:[e.jsx("span",{children:g.p1}),e.jsx("span",{className:"text-base text-slate-300",children:"vs"}),e.jsx("span",{children:g.p2})]}),e.jsx("span",{className:`text-xs font-bold uppercase tracking-wide ${m===g.id?"text-indigo-600 dark:text-indigo-400":"text-slate-500"}`,children:g.name})]},g.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto animate-fade-in",style:{animationDelay:"100ms"},children:[e.jsxs("button",{onClick:()=>a("PVP"),className:"group relative overflow-hidden bg-white dark:bg-slate-800 p-6 rounded-[2rem] border-2 border-slate-100 dark:border-slate-700 hover:border-pink-400 hover:shadow-xl transition-all duration-300 text-left",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-pink-100 dark:bg-pink-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-pink-500 text-white flex items-center justify-center text-3xl shadow-lg group-hover:rotate-6 transition-transform",children:"ðŸ‘¥"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Vs Friend"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium text-sm",children:"Pass & Play"})]}),e.jsx("div",{className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity text-pink-500 font-bold",children:"Play â†’"})]})]}),e.jsxs("button",{onClick:()=>a("PVB"),className:"group relative overflow-hidden bg-white dark:bg-slate-800 p-6 rounded-[2rem] border-2 border-slate-100 dark:border-slate-700 hover:border-indigo-400 hover:shadow-xl transition-all duration-300 text-left",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-100 dark:bg-indigo-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-500 text-white flex items-center justify-center text-3xl shadow-lg group-hover:-rotate-6 transition-transform",children:"ðŸ¤–"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Vs Bot"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium text-sm",children:"Challenge Mode"})]}),e.jsx("div",{className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity text-indigo-500 font-bold",children:"Play â†’"})]})]})]})]})})]}):e.jsxs("div",{className:"flex flex-col h-screen w-full relative",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[60%] h-[60%] bg-indigo-200/40 dark:bg-indigo-900/10 rounded-full blur-[100px] animate-pulse",style:{animationDuration:"8s"}}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-rose-200/40 dark:bg-rose-900/10 rounded-full blur-[100px] animate-pulse",style:{animationDuration:"10s"}})]}),e.jsxs("header",{className:"shrink-0 h-16 md:h-20 px-3 md:px-8 flex items-center justify-between z-30 bg-white/60 dark:bg-slate-900/40 backdrop-blur-md border-b border-slate-200 dark:border-white/5 relative shadow-sm transition-colors duration-300",children:[e.jsx("div",{className:"flex-1 flex justify-start min-w-0",children:e.jsx(z,{playerId:c.ONE,alignment:"left"})}),e.jsxs("div",{className:"shrink-0 flex gap-2 mx-2",children:[e.jsx(C,{variant:"icon",size:"sm",onClick:k,title:"Back to Game Menu",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(de,{})}),e.jsx(C,{variant:"icon",size:"sm",onClick:()=>a(r),title:"Restart Game",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(me,{})}),e.jsx(C,{variant:"icon",size:"sm",onClick:u,title:"Return to Menu",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(Y,{})})]}),e.jsx("div",{className:"flex-1 flex justify-end min-w-0",children:e.jsx(z,{playerId:c.TWO,alignment:"right"})})]}),e.jsx("main",{className:"flex-1 h-screen w-screen flex items-center justify-center p-2 pb-20 relative z-10 perspective-1000",children:e.jsx("div",{className:`
            relative aspect-square 
            portrait:w-full portrait:max-h-full
            landscape:h-full landscape:max-w-full
            flex items-center justify-center
         `,children:e.jsx("div",{className:"w-full h-screen flex items-center justify-center animate-fade-in",children:e.jsx(ie,{})})})}),e.jsx(ce,{})]})};export{he as ConnectFourGame};
