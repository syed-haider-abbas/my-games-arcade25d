import{f as w,c as I,p as f,r as g,j as e,B as b,u as S,V as M}from"./index-Zr6GBYZ8.js";import{H as _,G as C}from"./GameConfigFooter-BijTWn2m.js";var x=(t=>(t.IDLE="IDLE",t.PLAYING="PLAYING",t.WON="WON",t))(x||{}),p=(t=>(t.HIDDEN="HIDDEN",t.FLIPPED="FLIPPED",t.MATCHED="MATCHED",t))(p||{});const E=800,L={ANIMALS:["ðŸ¶","ðŸ±","ðŸ­","ðŸ¹","ðŸ°","ðŸ¦Š","ðŸ»","ðŸ¼","ðŸ¨","ðŸ¯","ðŸ¦","ðŸ®","ðŸ·","ðŸ¸","ðŸµ","ðŸ”","ðŸ§","ðŸ¦","ðŸ¤","ðŸ¦†","ðŸ¦…","ðŸ¦‰","ðŸ¦‡","ðŸº","ðŸ—","ðŸ´","ðŸ¦„","ðŸ","ðŸ›","ðŸ¦‹","ðŸŒ","ðŸž","ðŸœ","ðŸ¢","ðŸ","ðŸ¦Ž","ðŸ¦–","ðŸ¦•","ðŸ™","ðŸ¦‘"].map(w),NUMBERS:Array.from({length:50},(t,a)=>(a+1).toString()),ENGLISH:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),URDU:["Ø§","Ø¨","Ù¾","Øª","Ù¹","Ø«","Ø¬","Ú†","Ø­","Ø®","Ø¯","Úˆ","Ø°","Ø±","Ú‘","Ø²","Ú˜","Ø³","Ø´","Øµ","Ø¶","Ø·","Ø¸","Ø¹","Øº","Ù","Ù‚","Ú©","Ú¯","Ù„","Ù…","Ù†","Ùˆ","Û","Ú¾","Ø¡","ÛŒ","Û’"]},j={KIDDO:{back:"bg-gradient-to-br from-pink-400 to-rose-500",pattern:"opacity-20 text-white",board:"bg-indigo-50 dark:bg-slate-900",text:"text-slate-900",matched:"bg-emerald-100 dark:bg-emerald-900/30 ring-4 ring-emerald-400"},CLASSIC:{back:"bg-gradient-to-br from-blue-500 to-indigo-600",pattern:"opacity-10 text-white",board:"bg-slate-200 dark:bg-slate-800",text:"text-slate-800 dark:text-white",matched:"bg-slate-300 dark:bg-slate-700 opacity-50 shadow-inner"}},D=(t,a,s)=>{const l=t*t,n=Math.floor(l/a),i=[...L[s]].sort(()=>Math.random()-.5).slice(0,n);let r=[];i.forEach(c=>{for(let h=0;h<a;h++)r.push(c)});for(let c=r.length-1;c>0;c--){const h=Math.floor(Math.random()*(c+1));[r[c],r[h]]=[r[h],r[c]]}return{cards:r.map((c,h)=>({id:`card-${h}-${c}`,value:c,status:p.HIDDEN,animationDelay:Math.random()*.2})),totalMatches:n}},N="i-remember-state-v1",A=()=>{const t={gridSize:4,matchCount:2,contentType:"ANIMALS",cards:[],status:x.IDLE,moves:0,matchesFound:0,totalMatches:0,flippedIndices:[],isChecking:!1,hasSavedGame:!1};if(typeof window<"u")try{const a=localStorage.getItem(N);if(a){const s=JSON.parse(a);if(s.status===x.PLAYING)return{...t,...s,status:x.IDLE,hasSavedGame:!0,isChecking:!1,flippedIndices:[]};s.gridSize&&(t.gridSize=s.gridSize),s.matchCount&&(t.matchCount=s.matchCount),s.contentType&&(t.contentType=s.contentType)}}catch(a){console.warn(a)}return t},v=t=>{if(typeof window<"u"){const{gridSize:a,matchCount:s,contentType:l,cards:n,status:o,moves:m,matchesFound:i,totalMatches:r}=t,d={gridSize:a,matchCount:s,contentType:l,cards:n,status:o,moves:m,matchesFound:i,totalMatches:r,hasSavedGame:o===x.PLAYING};localStorage.setItem(N,JSON.stringify(d))}},y=I((t,a)=>({...A(),setConfig:s=>{t(l=>{const n={...l,...s};return v(n),n}),f("click")},startGame:()=>{const{gridSize:s,matchCount:l,contentType:n}=a(),{cards:o,totalMatches:m}=D(s,l,n);f("start");const i={cards:o,totalMatches:m,status:x.PLAYING,moves:0,matchesFound:0,flippedIndices:[],isChecking:!1,hasSavedGame:!1};t(i),v({...a(),...i})},resumeGame:()=>{f("click"),t({status:x.PLAYING})},resetGame:()=>{f("click"),t({status:x.IDLE,hasSavedGame:a().status===x.PLAYING,isChecking:!1,flippedIndices:[]})},flipCard:s=>{const{cards:l,flippedIndices:n,isChecking:o,status:m,matchCount:i}=a();if(m!==x.PLAYING||o||l[s].status!==p.HIDDEN||n.includes(s))return;f("tap");const r=[...l];r[s].status=p.FLIPPED;const d=[...n,s];t({cards:r,flippedIndices:d}),d.length===i&&(t({isChecking:!0,moves:a().moves+1}),setTimeout(()=>a().checkMatch(),300))},checkMatch:()=>{const{cards:s,flippedIndices:l,matchesFound:n,totalMatches:o}=a(),m=s[l[0]].value,i=l.every(d=>s[d].value===m),r=[...s];if(i){f("drop"),l.forEach(h=>{r[h].status=p.MATCHED});const d=n+1,c=d===o;t({cards:r,matchesFound:d,flippedIndices:[],isChecking:!1,status:c?x.WON:x.PLAYING}),c?(f("win"),typeof window<"u"&&localStorage.removeItem(N)):v(a())}else setTimeout(()=>{const d=[...a().cards];l.forEach(c=>{d[c].status=p.HIDDEN}),f("click"),t({cards:d,flippedIndices:[],isChecking:!1})},E)}})),k=({title:t,children:a})=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-slate-500 dark:text-slate-400 text-center md:text-left",children:t}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:a})]}),u=({label:t,sub:a,active:s,onClick:l,color:n="indigo"})=>e.jsxs("button",{onClick:l,className:`
            relative p-4 rounded-2xl border-2 transition-all duration-200 flex flex-col items-center justify-center gap-1
            ${s?`bg-${n}-50 dark:bg-${n}-900/20 border-${n}-500 text-${n}-600 dark:text-${n}-300 shadow-md scale-105 z-10`:"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-slate-300 dark:hover:border-slate-600"}
        `,children:[e.jsx("span",{className:"text-lg font-black",children:t}),a&&e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide opacity-70",children:a}),s&&e.jsx("div",{className:`absolute top-2 right-2 w-2 h-2 rounded-full bg-${n}-500 animate-pulse`})]}),T=()=>{const{gridSize:t,matchCount:a,contentType:s,setConfig:l,startGame:n,hasSavedGame:o,resumeGame:m}=y(),[i,r]=g.useState(!1);return i?e.jsx(_,{gameId:"i-remember",onBack:()=>r(!1)}):e.jsxs("div",{className:"absolute inset-0 flex flex-col bg-slate-50 dark:bg-[#0f172a] animate-fade-in",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"max-w-4xl mx-auto p-6 md:p-10 space-y-10 pb-32",children:[e.jsxs("div",{className:"text-center space-y-4 pt-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-cyan-400 to-blue-600 rounded-[2rem] shadow-xl rotate-3 mb-2",children:e.jsx("span",{className:"text-6xl font-emoji",children:w("ðŸ§ ")})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-black text-slate-900 dark:text-white tracking-tighter",children:"I-Remember"}),e.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 font-medium max-w-md mx-auto mt-2",children:"Flip, match, and train your brain!"})]})]}),o&&e.jsxs("div",{className:"animate-pop",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-xl border-l-8 border-cyan-500 flex flex-col sm:flex-row items-center justify-between gap-6 max-w-2xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white",children:"Game in Progress"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Resume your ",e.jsxs("span",{className:"font-bold text-cyan-500",children:[t,"x",t]})," match."]})]}),e.jsx(b,{onClick:m,size:"lg",className:"w-full sm:w-auto !bg-cyan-500 hover:!bg-cyan-400 whitespace-nowrap !rounded-xl !py-4 !px-8 text-lg shadow-lg shadow-cyan-500/30",children:"Continue"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-8 mb-4 max-w-2xl mx-auto",children:[e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Or Start New Game"}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"})]})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm rounded-[2.5rem] p-6 md:p-8 shadow-sm border border-slate-200/50 dark:border-slate-700/50 space-y-8 max-w-3xl mx-auto",children:[e.jsxs(k,{title:"Grid Size",children:[e.jsx(u,{label:"4x4",sub:"Easy",active:t===4,onClick:()=>l({gridSize:4}),color:"emerald"}),e.jsx(u,{label:"6x6",sub:"Medium",active:t===6,onClick:()=>l({gridSize:6}),color:"blue"}),e.jsx(u,{label:"8x8",sub:"Hard",active:t===8,onClick:()=>l({gridSize:8}),color:"rose"})]}),e.jsxs(k,{title:"Difficulty",children:[e.jsx(u,{label:"Match 2",sub:"Standard",active:a===2,onClick:()=>l({matchCount:2}),color:"cyan"}),e.jsx(u,{label:"Match 4",sub:"Expert",active:a===4,onClick:()=>l({matchCount:4}),color:"purple"})]}),e.jsxs(k,{title:"Theme",children:[e.jsx(u,{label:"Animals",sub:"Kiddo",active:s==="ANIMALS",onClick:()=>l({contentType:"ANIMALS"}),color:"pink"}),e.jsx(u,{label:"Numbers",sub:"Classic",active:s==="NUMBERS",onClick:()=>l({contentType:"NUMBERS"}),color:"indigo"}),e.jsx(u,{label:"English",sub:"ABC",active:s==="ENGLISH",onClick:()=>l({contentType:"ENGLISH"}),color:"amber"}),e.jsx(u,{label:"Urdu",sub:"Haroof",active:s==="URDU",onClick:()=>l({contentType:"URDU"}),color:"teal"})]})]})]}),e.jsx(C,{className:"md:hidden",onStart:n,onHowToPlay:()=>r(!0),startLabel:"Start Memory",startColorClass:"!bg-cyan-500 hover:!bg-cyan-400"})]}),e.jsx("div",{className:"hidden md:block w-full",children:e.jsx(C,{onStart:n,onHowToPlay:()=>r(!0),startLabel:"Start Memory",startColorClass:"!bg-cyan-500 hover:!bg-cyan-400"})})]})},G=g.memo(({data:t,index:a,onClick:s,contentType:l})=>{const o=l==="ANIMALS"?j.KIDDO:j.CLASSIC,m=t.status===p.FLIPPED,i=t.status===p.MATCHED,r=m||i;return e.jsxs("div",{className:"relative perspective-1000 w-full h-full transition-all duration-200",style:{animation:`fade-in 0.3s ease-out backwards ${t.animationDelay}s`,containerType:"size"},children:[e.jsx("button",{type:"button",onClick:()=>!i&&s(a),disabled:i,className:`
                    absolute inset-0 z-50 w-full h-full 
                    focus:outline-none touch-manipulation
                    ${i?"cursor-default":"cursor-pointer hover:scale-[1.02] active:scale-95 transition-transform"}
                `,"aria-label":r?`Card value ${t.value}`:"Hidden card"}),e.jsxs("div",{className:"w-full h-full relative preserve-3d transition-transform duration-500 will-change-transform pointer-events-none",style:{transform:r?"rotateY(180deg)":"rotateY(0deg)"},children:[e.jsx("div",{className:`
                        absolute inset-0 backface-hidden 
                        rounded-lg md:rounded-xl 
                        ${o.back}
                        shadow-[0_4px_0_rgba(0,0,0,0.1)]
                        flex items-center justify-center
                        border-2 border-white/20
                    `,children:e.jsx("span",{className:`text-3xl md:text-4xl font-black ${o.pattern}`,children:"?"})}),e.jsxs("div",{className:`
                        absolute inset-0 backface-hidden 
                        rounded-lg md:rounded-xl 
                        bg-white dark:bg-slate-800
                        shadow-[inset_0_-4px_0_rgba(0,0,0,0.1)]
                        flex items-center justify-center
                        border-2
                        ${i?o.matched:"border-indigo-100 dark:border-slate-700"}
                        overflow-hidden
                    `,style:{transform:"rotateY(180deg)"},children:[e.jsx("div",{className:`
                        flex items-center justify-center w-full h-full
                        ${i?"animate-pop":""}
                    `,children:e.jsx("span",{className:`font-black select-none leading-none ${o.text}`,style:{fontSize:"50cqmin",filter:i?"none":"drop-shadow(0 2px 2px rgba(0,0,0,0.1))"},children:t.value})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/10 to-transparent"})]})]})]})}),H=()=>{const{cards:t,gridSize:a,contentType:s,flipCard:l}=y(),{enableTilt:n}=S(),m=s==="ANIMALS"?j.KIDDO:j.CLASSIC,i=g.useMemo(()=>({gridTemplateColumns:`repeat(${a}, minmax(0, 1fr))`,gridTemplateRows:`repeat(${a}, minmax(0, 1fr))`,gap:a>=8?"0.25rem":"0.5rem"}),[a]),r=g.useMemo(()=>({width:"100%",maxWidth:"100%",aspectRatio:"1/1",transform:n?"rotateX(5deg)":"none"}),[n]);return e.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4 perspective-1000",children:e.jsx("div",{className:`
                    relative
                    ${m.board}
                    rounded-2xl
                    p-2 md:p-3
                    shadow-[0_20px_50px_rgba(0,0,0,0.2),_0_10px_0_rgba(0,0,0,0.1)]
                    border-b-8 border-black/10 dark:border-black/30
                    will-change-transform
                    transition-transform duration-500
                    flex flex-col
                `,style:r,children:e.jsx("div",{className:"w-full h-full grid",style:i,children:t.map((d,c)=>e.jsx("div",{className:"w-full h-full",children:e.jsx(G,{data:d,index:c,onClick:l,contentType:s})},d.id))})})})},P=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),z=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),R=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),F=()=>{const{status:t,moves:a,matchesFound:s,totalMatches:l,resetGame:n,startGame:o}=y(),{setView:m}=S(),[i,r]=g.useState(!1);g.useEffect(()=>{t===x.WON?r(!0):r(!1)},[t]);const d=()=>{n(),m(M.HOME)},c=()=>{n()},h=()=>{o()};return t===x.IDLE?e.jsx(T,{}):e.jsxs("div",{className:"flex flex-col h-screen w-full bg-slate-100 dark:bg-slate-950 text-slate-900 dark:text-white relative overflow-hidden transition-colors duration-500",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-40",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_#22d3ee_0%,_#f1f5f9_50%)] dark:bg-[radial-gradient(circle_at_top_right,_#0891b2_0%,_#020617_50%)]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1/2 bg-[radial-gradient(ellipse_at_bottom_left,_#c084fc_0%,_transparent_50%)] dark:bg-[radial-gradient(ellipse_at_bottom_left,_#581c87_0%,_transparent_50%)]"})]}),e.jsxs("header",{className:"shrink-0 h-16 md:h-20 px-3 md:px-8 flex items-center justify-between z-30 bg-white/60 dark:bg-black/20 backdrop-blur-md border-b border-slate-200 dark:border-white/5 shadow-sm transition-colors duration-300",children:[e.jsxs("div",{className:"flex-1 flex justify-start min-w-0 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-xl bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 flex items-center justify-center font-black",children:"#"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Moves"}),e.jsx("span",{className:"text-sm font-bold",children:a})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-xl bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 flex items-center justify-center font-black font-emoji",children:w("âœ¨")}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Found"}),e.jsxs("span",{className:"text-sm font-bold",children:[s," / ",l]})]})]})]}),e.jsxs("div",{className:"shrink-0 flex items-center gap-2 mx-2",children:[e.jsx(b,{variant:"icon",size:"sm",onClick:c,title:"Back to Config",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(z,{})}),e.jsx(b,{variant:"icon",size:"sm",onClick:h,title:"Restart",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(R,{})}),e.jsx(b,{variant:"icon",size:"sm",onClick:d,title:"Home",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(P,{})})]}),e.jsx("div",{className:"flex-1"})]}),e.jsx("main",{className:"flex-1 h-screen w-screen flex items-center justify-center p-2 relative z-10 perspective-1000 overflow-hidden",children:e.jsx("div",{className:`
                    relative aspect-square 
                    portrait:w-full portrait:max-h-full
                    landscape:h-full landscape:max-w-full
                    flex items-center justify-center
                 `,children:e.jsx("div",{className:"w-full h-screen flex items-center justify-center animate-fade-in",children:e.jsx(H,{})})})}),i&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-[2rem] shadow-2xl max-w-sm w-full text-center border-4 border-cyan-400 animate-bounce-in",children:[e.jsx("div",{className:"text-6xl mb-4 font-emoji",children:w("ðŸŽ‰")}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Awesome!"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-medium mb-6",children:["You found all matches in ",e.jsx("strong",{className:"text-cyan-600 dark:text-cyan-400",children:a})," moves."]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(b,{onClick:()=>o(),size:"lg",className:"w-full !rounded-xl !py-4 shadow-lg !bg-cyan-500 hover:!bg-cyan-400",children:"Play Again"}),e.jsx(b,{onClick:n,variant:"secondary",className:"w-full !rounded-xl !py-4",children:"Back to Settings"})]})]})})]})};export{F as IRememberGame};
