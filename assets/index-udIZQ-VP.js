import{P as c,c as Z,p as I,u as A,r as g,j as e,B as _,V as $}from"./index-DSwU-wzX.js";var p=(t=>(t.IDLE="IDLE",t.PLAYING="PLAYING",t.WON="WON",t.DRAW="DRAW",t))(p||{});const E=8,T=[{id:"bear-tiger",name:"Forest Kings",p1:"üêª",p2:"üêØ"},{id:"cat-dog",name:"Pet Pals",p1:"üê±",p2:"üê∂"},{id:"lion-zebra",name:"Safari",p1:"ü¶Å",p2:"ü¶ì"},{id:"bunny-fox",name:"Meadow",p1:"üê∞",p2:"ü¶ä"},{id:"frog-pig",name:"Farm",p1:"üê∏",p2:"üê∑"},{id:"unicorn-dragon",name:"Fantasy",p1:"ü¶Ñ",p2:"üê≤"}],L={STANDARD:{name:"Classic",board:{container:"bg-slate-300 dark:bg-[#334155] border-slate-400 dark:border-[#475569] shadow-[0_30px_60px_-15px_rgba(0,0,0,0.3),_0_12px_0_#94a3b8] dark:shadow-[0_30px_60px_-15px_rgba(0,0,0,0.7),_0_12px_0_#1e293b]",surface:"bg-gradient-to-br from-white/40 to-transparent dark:from-white/5",grid:"bg-slate-400 dark:bg-[#0f172a] border-slate-400/50 dark:border-slate-700/50 shadow-[inset_0_2px_10px_rgba(0,0,0,0.2)] dark:shadow-[inset_0_2px_10px_rgba(0,0,0,0.5)]"},cell:{bg:"bg-slate-200 dark:bg-[#1e293b]",hole:"bg-slate-300 dark:bg-[#020617]",starPoint:"bg-slate-400 dark:bg-teal-500/30"},pieces:{BLACK:{gradient:"from-[#334155] via-[#1e293b] to-[#020617]",border:"border-slate-600/30",label:"Black",icon:""},WHITE:{gradient:"from-white via-[#f1f5f9] to-[#cbd5e1]",border:"border-white/60",label:"White",icon:""}},playerPanel:{[c.ONE]:{gradient:"from-slate-700 to-black",textColor:"text-slate-800 dark:text-slate-300",borderColor:"border-slate-600",shadowColor:"shadow-slate-900/50"},[c.TWO]:{gradient:"from-white to-slate-300",textColor:"text-slate-800 dark:text-slate-200",borderColor:"border-white",shadowColor:"shadow-slate-200/50"}}},KIDS:{name:"Chess Kiddo",board:{container:"bg-slate-100 dark:bg-slate-800 border-indigo-200 dark:border-slate-700 shadow-[0_30px_60px_-15px_rgba(99,102,241,0.25),_0_12px_0_#cbd5e1] dark:shadow-[0_30px_60px_-15px_rgba(0,0,0,0.5),_0_12px_0_#1e293b]",surface:"bg-gradient-to-br from-white/80 to-white/20",grid:"bg-indigo-100 dark:bg-slate-900 border-indigo-200/50 dark:border-slate-700 shadow-[inset_0_2px_10px_rgba(0,0,0,0.05)]"},cell:{bg:"bg-white dark:bg-slate-700",hole:"bg-indigo-50 dark:bg-slate-950",starPoint:"bg-indigo-300 dark:bg-indigo-500"},pieces:{BLACK:{gradient:"from-indigo-400 via-indigo-500 to-indigo-600",border:"border-indigo-300/50",label:"Indigo"},WHITE:{gradient:"from-amber-300 via-amber-400 to-amber-500",border:"border-amber-200/50",label:"Amber"}},playerPanel:{[c.ONE]:{gradient:"from-indigo-400 to-indigo-600",textColor:"text-indigo-700 dark:text-indigo-300",borderColor:"border-indigo-400",shadowColor:"shadow-indigo-500/50"},[c.TWO]:{gradient:"from-amber-300 to-amber-500",textColor:"text-amber-700 dark:text-amber-300",borderColor:"border-amber-400",shadowColor:"shadow-amber-500/50"}}}},G=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],V=t=>{const a=[];for(let r=0;r<t;r++){const n=[];for(let m=0;m<t;m++)n.push({row:r,col:m,owner:null,isValidMove:!1,isFlipping:!1});a.push(n)}const s=Math.floor(t/2);return s>0&&(a[s-1][s-1].owner="WHITE",a[s-1][s].owner="BLACK",a[s][s-1].owner="BLACK",a[s][s].owner="WHITE"),a},O=(t,a,s,r)=>{const n=t.length;if(a<0||a>=n||s<0||s>=n||t[a][s].owner!==null)return!1;const m=r==="BLACK"?"WHITE":"BLACK";for(const[h,i]of G){let l=a+h,o=s+i,x=!1;for(;l>=0&&l<n&&o>=0&&o<n;){const d=t[l][o].owner;if(d===m)x=!0;else if(d===r){if(x)return!0;break}else break;l+=h,o+=i}}return!1},H=(t,a)=>t.map(s=>s.map(r=>({...r,isValidMove:O(t,r.row,r.col,a)}))),K=(t,a)=>{const s=t.length;for(let r=0;r<s;r++)for(let n=0;n<s;n++)if(O(t,r,n,a))return!0;return!1},q=(t,a,s,r)=>{const n=t.length,m=t.map(l=>l.map(o=>({...o})));m[a][s].owner=r,m[a][s].isFlipping=!0;const h=r==="BLACK"?"WHITE":"BLACK";let i=0;for(const[l,o]of G){let x=a+l,d=s+o;const b=[];for(;x>=0&&x<n&&d>=0&&d<n;){const u=m[x][d].owner;if(u===h)b.push({r:x,c:d});else if(u===r){b.length>0&&b.forEach(w=>{m[w.r][w.c].owner=r,m[w.r][w.c].isFlipping=!0,i++});break}else break;x+=l,d+=o}}return{newBoard:m,flippedCount:i}},J=t=>{let a=0,s=0;return t.forEach(r=>r.forEach(n=>{n.owner==="BLACK"&&a++,n.owner==="WHITE"&&s++})),{BLACK:a,WHITE:s}},Q=[[100,-20,10,-20,100],[-20,-30,-5,-30,-20],[10,-5,5,-5,10],[-20,-30,-5,-30,-20],[100,-20,10,-20,100]],U=[[100,-20,10,10,-20,100],[-20,-50,-2,-2,-50,-20],[10,-2,-1,-1,-2,10],[10,-2,-1,-1,-2,10],[-20,-50,-2,-2,-50,-20],[100,-20,10,10,-20,100]],X=[[100,-20,10,5,5,10,-20,100],[-20,-50,-2,-2,-2,-2,-50,-20],[10,-2,-1,-1,-1,-1,-2,10],[5,-2,-1,-1,-1,-1,-2,5],[5,-2,-1,-1,-1,-1,-2,5],[10,-2,-1,-1,-1,-1,-2,10],[-20,-50,-2,-2,-2,-2,-50,-20],[100,-20,10,5,5,10,-20,100]],ee=t=>t===5?Q:t===6?U:X,te=(t,a)=>{const s=t.length,r=[];for(let i=0;i<s;i++)for(let l=0;l<s;l++)O(t,i,l,a)&&r.push({r:i,c:l});if(r.length===0)return null;let n=r[0],m=-1/0;const h=ee(s);r.sort(()=>Math.random()-.5);for(const i of r){let l=h[i.r][i.c];(i.r===0||i.r===s-1)&&(i.c===0||i.c===s-1)&&(l+=1e3),l>m&&(m=l,n=i)}return{row:n.r,col:n.c}},R="reversi-state-v1",B=t=>{if(typeof window<"u"){const{board:a,turn:s,status:r,winner:n,players:m,gameMode:h,boardSize:i,botStats:l,pvpStats:o,themeId:x,characterSetId:d}=t,b={board:a,turn:s,status:r,winner:n,players:m,gameMode:h,boardSize:i,botStats:l,pvpStats:o,themeId:x,characterSetId:d};window.localStorage.setItem(R,JSON.stringify(b))}},se=()=>{const t={status:p.IDLE,gameMode:"PVP",boardSize:E,themeId:"KIDS",characterSetId:T[0].id,turn:"BLACK",board:V(E),winner:null,players:{[c.ONE]:{id:c.ONE,name:"Player 1",color:"BLACK",score:2},[c.TWO]:{id:c.TWO,name:"Player 2",color:"WHITE",score:2}},botStats:{playerWins:0,botWins:0},pvpStats:{player1Wins:0,player2Wins:0},possibleMoves:[],noMovesAlert:!1,hasSavedGame:!1,isBotThinking:!1};if(typeof window<"u")try{const a=window.localStorage.getItem(R);if(a){const s=JSON.parse(a);if(s.botStats&&(t.botStats=s.botStats),s.pvpStats&&(t.pvpStats=s.pvpStats),s.gameMode&&(t.gameMode=s.gameMode),s.boardSize&&(t.boardSize=s.boardSize),s.themeId&&(t.themeId=s.themeId),s.characterSetId&&(t.characterSetId=s.characterSetId),s.status===p.PLAYING)return{...t,...s,status:p.IDLE,hasSavedGame:!0,isBotThinking:!1}}}catch(a){console.warn("Failed to load Reversi state",a)}return t},v=Z((t,a)=>({...se(),startGame:(s="PVP",r)=>{I("start");const n=r||a().boardSize||E,m=V(n),h=H(m,"BLACK"),{players:i}=a(),l={...i};if(s==="PVB")l[c.ONE]={...l[c.ONE],name:"You",score:2},l[c.TWO]={...l[c.TWO],name:"Bot",score:2};else{const x=A.getState().players;l[c.ONE]={...l[c.ONE],name:x[c.ONE].name,score:2},l[c.TWO]={...l[c.TWO],name:x[c.TWO].name,score:2}}const o={status:p.PLAYING,gameMode:s,boardSize:n,board:h,turn:"BLACK",winner:null,players:l,noMovesAlert:!1,hasSavedGame:!1,isBotThinking:!1};t(o),B({...a(),...o})},setTheme:s=>{I("click"),t({themeId:s}),B({...a(),themeId:s})},setCharacterSet:s=>{I("click"),t({characterSetId:s}),B({...a(),characterSetId:s})},resumeGame:()=>{I("click"),t({status:p.PLAYING});const{turn:s,gameMode:r}=a();r==="PVB"&&s==="WHITE"&&setTimeout(()=>{const n=a();n.status===p.PLAYING&&n.turn==="WHITE"&&n.placeDisc(-1,-1)},500)},resetGame:()=>{I("click"),t({status:p.IDLE,hasSavedGame:a().status===p.PLAYING,noMovesAlert:!1,isBotThinking:!1})},placeDisc:(s,r)=>{const{board:n,turn:m,players:h,status:i,gameMode:l,isBotThinking:o}=a();if(i!==p.PLAYING)return;if(l==="PVB"&&m==="WHITE"){if(o||s!==-1)return;t({isBotThinking:!0}),setTimeout(()=>{const d=te(n,"WHITE");d?P(d.row,d.col):P(-1,-1),t({isBotThinking:!1})},800);return}P(s,r)},syncPlayers:s=>{t(r=>r.gameMode==="PVB"?{players:{[c.ONE]:{...r.players[c.ONE],name:"You"},[c.TWO]:{...r.players[c.TWO],name:"Bot"}}}:{players:{[c.ONE]:{...r.players[c.ONE],name:s[c.ONE].name},[c.TWO]:{...r.players[c.TWO],name:s[c.TWO].name}}})},dismissAlert:()=>t({noMovesAlert:!1})})),P=(t,a)=>{const s=v.getState(),{board:r,turn:n,players:m,gameMode:h,botStats:i,pvpStats:l}=s,{newBoard:o,flippedCount:x}=q(r,t,a,n);x>0&&(I("drop"),setTimeout(()=>I("click"),200)),setTimeout(()=>{v.setState(S=>({board:S.board.map(Y=>Y.map(F=>({...F,isFlipping:!1})))}))},600);const d=J(o),b=n==="BLACK"?"WHITE":"BLACK";let u=K(o,b),w=b,C=!1,f=null,j=p.PLAYING,N=i,y=l;u||(K(o,n)?(w=n,C=!0):(f=d.BLACK>d.WHITE?"BLACK":d.WHITE>d.BLACK?"WHITE":null,j=d.BLACK===d.WHITE?p.DRAW:p.WON,I("win"),h==="PVB"&&f?(f==="BLACK"&&(N={...i,playerWins:i.playerWins+1}),f==="WHITE"&&(N={...i,botWins:i.botWins+1})):f&&(f==="BLACK"&&(y={...l,player1Wins:l.player1Wins+1}),f==="WHITE"&&(y={...l,player2Wins:l.player2Wins+1}))));const W={board:j===p.PLAYING?H(o,w):o,turn:w,noMovesAlert:C,status:j,winner:f,players:{[c.ONE]:{...m[c.ONE],score:d.BLACK},[c.TWO]:{...m[c.TWO],score:d.WHITE}},hasSavedGame:j===p.PLAYING,botStats:N,pvpStats:y};v.setState(W),B({...s,...W}),j===p.PLAYING&&h==="PVB"&&w==="WHITE"&&setTimeout(()=>{const S=v.getState();S.status===p.PLAYING&&S.turn==="WHITE"&&S.placeDisc(-1,-1)},500)},ae=g.memo(({owner:t,isValidMove:a,isFlipping:s,theme:r,blackIcon:n,whiteIcon:m})=>{const h=r.pieces.WHITE,i=r.pieces.BLACK,l=n||i.icon,o=m||h.icon,x=!!(l&&o),d=g.useMemo(()=>t==="BLACK"?"rotateY(180deg)":"rotateY(0deg)",[t]),b=g.useMemo(()=>({transform:s?`${d} translateZ(30px) scale(1.15)`:`${d} translateZ(2px)`}),[s,d]),u=g.useMemo(()=>({transform:s?"scale(0.6) translateY(20%)":"scale(1) translateY(5%)",opacity:s?.3:.6}),[s]);return e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center preserve-3d",children:[!t&&a&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:`
                w-[40%] h-[40%] rounded-full 
                bg-teal-500/30 dark:bg-teal-400/20 
                border border-teal-500/40 dark:border-teal-400/40
                shadow-[0_0_15px_rgba(20,184,166,0.3)] dark:shadow-[0_0_15px_rgba(45,212,191,0.2)]
                animate-pulse
             `})}),t&&e.jsx("div",{className:"absolute bottom-0 w-[80%] h-[80%] rounded-full bg-slate-900/40 dark:bg-black/60 blur-[4px] will-change-transform",style:u}),t&&e.jsxs("div",{className:"w-full h-full relative preserve-3d will-change-transform",style:{...b,transition:"transform 700ms cubic-bezier(0.34, 1.56, 0.64, 1)"},children:[e.jsx("div",{className:"absolute inset-0 backface-hidden",style:{transform:"rotateY(0deg) translateZ(1px)",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",borderRadius:x?"0":"9999px"},children:e.jsx("div",{className:`
                    absolute inset-0 flex items-center justify-center overflow-visible
                    ${x?"":`rounded-full bg-gradient-to-br ${h.gradient} border ${h.border} shadow-[inset_0_-2px_4px_rgba(0,0,0,0.1)]`}
                `,children:x?e.jsx("span",{className:"leading-none select-none transform",style:{fontSize:"85cqmin"},children:o}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-[15%] rounded-full border border-black/5 shadow-[inset_0_2px_4px_rgba(0,0,0,0.1)] pointer-events-none"}),e.jsx("div",{className:"absolute top-[5%] left-[20%] w-[60%] h-[30%] bg-gradient-to-b from-white to-transparent opacity-60 rounded-[50%] pointer-events-none"})]})})}),e.jsx("div",{className:"absolute inset-0 backface-hidden",style:{transform:"rotateY(180deg) translateZ(1px)",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",borderRadius:x?"0":"9999px"},children:e.jsx("div",{className:`
                    absolute inset-0 flex items-center justify-center overflow-visible
                    ${x?"":`rounded-full bg-gradient-to-br ${i.gradient} border ${i.border} shadow-[inset_0_-2px_4px_rgba(0,0,0,0.5)]`}
                `,children:x?e.jsx("span",{className:"leading-none select-none transform",style:{fontSize:"85cqmin"},children:l}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-[15%] rounded-full border border-white/10 shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)] pointer-events-none"}),e.jsx("div",{className:"absolute top-[5%] left-[20%] w-[60%] h-[30%] bg-gradient-to-b from-white to-transparent opacity-40 rounded-[50%] pointer-events-none"})]})})}),!x&&e.jsx("div",{className:"absolute inset-[1px] rounded-full border-[3px] border-slate-500/50 -z-10",style:{transform:"rotateY(90deg)",opacity:.5}})]})]})},(t,a)=>t.owner===a.owner&&t.isValidMove===a.isValidMove&&t.isFlipping===a.isFlipping&&t.theme.name===a.theme.name&&t.blackIcon===a.blackIcon&&t.whiteIcon===a.whiteIcon),re=g.memo(({cell:t,isClickable:a,onPlace:s,boardSize:r,theme:n,blackIcon:m,whiteIcon:h})=>{const{row:i,col:l,owner:o,isValidMove:x,isFlipping:d}=t,b=a&&x,u=g.useCallback(()=>{b&&s(i,l)},[b,i,l,s]),w=g.useMemo(()=>o?!1:r===8?(i===2||i===6)&&(l===2||l===6):r===6?(i===1||i===4)&&(l===1||l===4):!1,[o,i,l,r]);return e.jsxs("div",{className:`
                relative 
                ${n.cell.bg}
                rounded-[4px] sm:rounded-md
                flex items-center justify-center 
                shadow-[inset_0_4px_6px_rgba(0,0,0,0.1),_0_1px_0_rgba(255,255,255,0.8)] dark:shadow-[inset_0_4px_6px_rgba(0,0,0,0.6),_0_1px_0_rgba(255,255,255,0.1)]
                border-t border-black/5 dark:border-black/20
                border-b border-white/50 dark:border-white/5
            `,style:{containerType:"size"},children:[e.jsx("button",{type:"button",onClick:u,disabled:!b,className:`
                    absolute inset-0 z-50 w-full h-full 
                    focus:outline-none 
                    touch-manipulation
                    ${b?"cursor-pointer hover:bg-black/5 dark:hover:bg-white/5 active:bg-black/10":"cursor-default"}
                `,"aria-label":`Place disc at row ${i+1}, column ${l+1}`}),e.jsx("div",{className:`absolute inset-[10%] rounded-full ${n.cell.hole} shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] dark:shadow-[inset_0_2px_4px_rgba(0,0,0,1)] opacity-60 pointer-events-none`}),w&&e.jsx("div",{className:`absolute w-1.5 h-1.5 ${n.cell.starPoint} rounded-full shadow-[inset_0_1px_2px_rgba(0,0,0,0.2)] pointer-events-none`}),e.jsx("div",{className:"w-[96%] h-[96%] relative flex items-center justify-center z-10 pointer-events-none preserve-3d",children:e.jsx(ae,{owner:o,isValidMove:x,isFlipping:d,theme:n,blackIcon:m,whiteIcon:h})})]})},(t,a)=>t.cell.owner===a.cell.owner&&t.cell.isValidMove===a.cell.isValidMove&&t.cell.isFlipping===a.cell.isFlipping&&t.isClickable===a.isClickable&&t.boardSize===a.boardSize&&t.theme.name===a.theme.name&&t.blackIcon===a.blackIcon&&t.whiteIcon===a.whiteIcon),le=g.memo(()=>{const t=v(f=>f.board),a=v(f=>f.placeDisc),s=v(f=>f.status),r=v(f=>f.themeId),n=v(f=>f.characterSetId),m=A(f=>f.enableTilt),h=L[r],i=g.useMemo(()=>T.find(f=>f.id===n)||T[0],[n]),l=t.length,o=s===p.PLAYING,x=g.useCallback((f,j)=>{a(f,j)},[a]),d=g.useMemo(()=>({width:"100%",maxWidth:"100%",aspectRatio:"1/1",transform:m?"rotateX(20deg)":"none"}),[m]),b=g.useMemo(()=>({gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`,gridTemplateRows:`repeat(${l}, minmax(0, 1fr))`,touchAction:"none"}),[l]),u=r==="KIDS",w=u?i.p1:void 0,C=u?i.p2:void 0;return e.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4 perspective-1000",children:e.jsxs("div",{className:`
                    relative 
                    ${h.board.container}
                    rounded-xl 
                    border-4
                    p-1.5 sm:p-2
                    preserve-3d
                    will-change-transform
                `,style:d,children:[e.jsx("div",{className:`absolute inset-0 ${h.board.surface} rounded-lg pointer-events-none`}),e.jsx("div",{className:`
                        grid gap-1 sm:gap-2 w-full h-full
                        ${h.board.grid}
                        rounded-lg
                        p-0.5 sm:p-1
                        border
                    `,style:b,children:t.map((f,j)=>f.map((N,y)=>e.jsx(re,{cell:N,isClickable:o,onPlace:x,boardSize:l,theme:h,blackIcon:w,whiteIcon:C},`${j}-${y}`)))})]})})}),D=g.memo(({playerId:t,alignment:a})=>{const s=v(u=>u.players[t]),r=v(u=>u.turn),n=v(u=>u.winner),m=v(u=>u.themeId),h=v(u=>u.characterSetId),i=L[m].playerPanel[t],l=g.useMemo(()=>T.find(u=>u.id===h)||T[0],[h]),o=g.useMemo(()=>r==="BLACK"&&t===c.ONE||r==="WHITE"&&t===c.TWO,[r,t]),x=g.useMemo(()=>n==="BLACK"&&t===c.ONE||n==="WHITE"&&t===c.TWO,[n,t]),d=a==="right",b=m==="KIDS"?t===c.ONE?l.p1:l.p2:null;return e.jsxs("div",{className:`
        flex items-center gap-3 md:gap-4
        transition-all duration-300
        ${d?"flex-row-reverse text-right":"flex-row text-left"}
        ${o?"opacity-100 scale-105":"opacity-60 grayscale-[0.3] scale-100"}
      `,children:[e.jsxs("div",{className:`
          relative
          w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl
          flex items-center justify-center
          bg-gradient-to-br ${i.gradient}
          shadow-lg ${o?i.shadowColor:"shadow-none"}
          border-2 ${o?"border-current":i.borderColor}
          ${i.textColor}
          transition-all duration-300
        `,children:[b?e.jsx("span",{className:"text-xl md:text-3xl select-none",children:b}):e.jsx("div",{className:`
                w-6 h-6 md:w-8 md:h-8 rounded-full shadow-inner 
                ${t===c.ONE?"bg-black/30 border-black/10":"bg-white/30 border-white/20"}
                border
            `}),x&&e.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:"üëë"})]}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("h2",{className:`text-sm md:text-lg font-bold ${i.textColor} leading-tight transition-colors`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("div",{className:`
               px-2 py-0.5 rounded-md 
               bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-300
               text-[10px] md:text-xs font-mono
               transition-colors
             `,children:["Count: ",e.jsx("span",{className:"text-slate-900 dark:text-white font-bold",children:s.score})]}),o&&!n&&e.jsx("div",{className:`
                 hidden sm:block px-2 py-0.5 rounded-full 
                 bg-teal-600 text-white 
                 text-[10px] font-bold uppercase tracking-wider animate-pulse
               `,children:"Turn"})]})]})]})}),ne=()=>{const{status:t,winner:a,startGame:s,resetGame:r,players:n,gameMode:m,themeId:h}=v(),{setView:i}=A(),[l,o]=g.useState(!1);if(g.useEffect(()=>{t===p.WON||t===p.DRAW?o(!0):o(!1)},[t]),!l||t!==p.WON&&t!==p.DRAW)return null;const x=a==="BLACK"?c.ONE:c.TWO,d=L[h].playerPanel[x],b=()=>{r(),i($.HOME)},u=()=>{s(m)},w=x?n[x].name:"";return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-[2px] transition-opacity duration-300",onClick:()=>o(!1)}),e.jsxs("div",{className:"relative bg-white/50 dark:bg-slate-800/50 backdrop-blur-xl rounded-3xl p-8 max-w-md w-full text-center shadow-2xl border border-white/40 dark:border-slate-700/40 animate-bounce-in transform transition-all duration-300",children:[e.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 p-2 text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white transition-colors bg-white/50 dark:bg-black/20 rounded-full",title:"Close to View Board",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),t===p.WON&&d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`mx-auto w-24 h-24 rounded-full bg-gradient-to-br ${d.gradient} flex items-center justify-center mb-6 shadow-xl border-4 border-white/30 dark:border-slate-600/30`,children:e.jsx("span",{className:"text-5xl",children:a==="BLACK"?"‚ö´":"‚ö™"})}),e.jsxs("h2",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 uppercase tracking-tight drop-shadow-sm",children:[w," Wins!"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-8 font-medium",children:"Total domination of the board."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto w-24 h-24 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-5xl",children:"ü§ù"})}),e.jsx("h2",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 drop-shadow-sm",children:"Draw!"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-8 font-medium",children:"A perfectly balanced game."})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(_,{onClick:u,size:"lg",className:"w-full !bg-teal-600 hover:!bg-teal-500 shadow-lg",children:"Play Again"}),e.jsx(_,{onClick:b,variant:"secondary",className:"w-full !bg-white/50 dark:!bg-black/20 hover:!bg-white/80 dark:hover:!bg-black/40",children:"Back to Menu"})]})]})]})},z=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),ie=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),oe=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),ce=()=>{const{status:t,startGame:a,resumeGame:s,resetGame:r,syncPlayers:n,turn:m,winner:h,noMovesAlert:i,dismissAlert:l,hasSavedGame:o,gameMode:x,boardSize:d,themeId:b,setTheme:u,characterSetId:w,setCharacterSet:C}=v(),{setView:f,players:j}=A(),[N,y]=g.useState(d||E);g.useEffect(()=>{n(j)},[j,n]),g.useEffect(()=>{d&&y(d)},[d]);const M=()=>{r(),f($.HOME)},W=()=>{r()},S=()=>{a(x,N)};return t===p.IDLE?e.jsxs("div",{className:"flex flex-col h-screen w-full bg-slate-50 dark:bg-[#0f172a] text-slate-900 dark:text-white relative overflow-hidden transition-colors duration-500",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-40",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-teal-400/20 dark:bg-teal-900/20 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-400/20 dark:bg-indigo-900/20 rounded-full blur-[100px]"})]}),e.jsx("header",{className:"shrink-0 h-16 md:h-20 px-4 md:px-8 flex items-center justify-center z-30 bg-white/50 dark:bg-slate-900/50 backdrop-blur-md sticky top-0 border-b border-slate-200/50 dark:border-white/5",children:e.jsx(_,{variant:"icon",size:"sm",onClick:M,title:"Return to Menu",children:e.jsx(z,{})})}),e.jsx("div",{className:"flex-1 w-full overflow-y-auto p-4 md:p-8 pb-24",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 text-center relative z-20",children:[e.jsxs("div",{className:"space-y-4 animate-fade-in pt-4",children:[e.jsx("div",{className:`
                                inline-flex items-center justify-center w-24 h-24 rounded-[2rem] shadow-2xl mb-4 rotate-6 border-[6px] 
                                ${b==="KIDS"?"bg-indigo-50 border-indigo-200 dark:bg-slate-800 dark:border-slate-700":"bg-white dark:bg-slate-800 border-teal-500"}
                                transition-colors duration-300
                            `,children:e.jsx("span",{className:"text-6xl",children:b==="KIDS"?"üêß":"‚ö™"})}),e.jsx("h1",{className:"text-5xl md:text-6xl font-black text-slate-900 dark:text-white tracking-tighter drop-shadow-sm",children:"Reversi"}),e.jsx("p",{className:"text-lg md:text-xl text-slate-600 dark:text-slate-400 font-medium max-w-lg mx-auto leading-relaxed",children:"Flip opponent pieces to your color. Strategy meets fun!"})]}),o&&e.jsxs("div",{className:"animate-pop",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-xl border-l-8 border-teal-500 flex flex-col sm:flex-row items-center justify-between gap-6 max-w-2xl mx-auto ring-1 ring-slate-900/5",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white",children:"Game in Progress"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:["Resume: ",e.jsxs("span",{className:"font-bold text-teal-600 dark:text-teal-400",children:[d,"x",d," Board"]})]})]}),e.jsx(_,{onClick:s,size:"lg",className:"w-full sm:w-auto !bg-teal-500 hover:!bg-teal-400 whitespace-nowrap !rounded-xl !py-4 !px-8 text-lg shadow-lg shadow-teal-500/30",children:"Continue Game"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-8 mb-4 max-w-2xl mx-auto",children:[e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Or Start New Game"}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"})]})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"bg-slate-200 dark:bg-slate-800 p-1.5 rounded-2xl inline-flex shadow-inner",children:[e.jsx("button",{onClick:()=>u("KIDS"),className:`
                                        px-6 py-2.5 rounded-xl text-sm font-bold uppercase tracking-wider transition-all
                                        ${b==="KIDS"?"bg-indigo-500 text-white shadow-md transform scale-105":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}
                                    `,children:"üêß Kiddo"}),e.jsx("button",{onClick:()=>u("STANDARD"),className:`
                                        px-6 py-2.5 rounded-xl text-sm font-bold uppercase tracking-wider transition-all
                                        ${b==="STANDARD"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-md transform scale-105":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}
                                    `,children:"‚ö™ Classic"})]})}),b==="KIDS"&&e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Choose Characters"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:T.map(k=>e.jsxs("button",{onClick:()=>C(k.id),className:`
                                                group flex flex-col items-center gap-2 p-4 rounded-2xl border-2 transition-all
                                                ${w===k.id?"bg-indigo-50 dark:bg-indigo-900/30 border-indigo-500 shadow-md transform scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-700"}
                                            `,children:[e.jsxs("div",{className:"flex items-center gap-2 text-4xl group-hover:scale-110 transition-transform",children:[e.jsx("span",{children:k.p1}),e.jsx("span",{className:"text-base text-slate-300",children:"vs"}),e.jsx("span",{children:k.p2})]}),e.jsx("span",{className:`text-xs font-bold uppercase tracking-wide ${w===k.id?"text-indigo-600 dark:text-indigo-400":"text-slate-500"}`,children:k.name})]},k.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16 items-start text-left max-w-4xl mx-auto",children:[e.jsxs("div",{className:"space-y-6 animate-fade-in",style:{animationDelay:"100ms"},children:[e.jsxs("div",{className:"flex items-center gap-4 justify-center md:justify-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 flex items-center justify-center font-bold text-sm",children:"1"}),e.jsx("h2",{className:"text-lg font-black uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Board Size"})]}),e.jsx("div",{className:"flex flex-col gap-3",children:[{s:5,label:"Junior",desc:"Quick & Fun",color:"bg-amber-400",ring:"peer-checked:ring-amber-400"},{s:6,label:"Pro",desc:"Balanced",color:"bg-emerald-400",ring:"peer-checked:ring-emerald-400"},{s:8,label:"Master",desc:"Classic Strategy",color:"bg-indigo-400",ring:"peer-checked:ring-indigo-400"}].map(k=>e.jsxs("label",{className:"relative group cursor-pointer",children:[e.jsx("input",{type:"radio",name:"boardSize",className:"peer sr-only",checked:N===k.s,onChange:()=>y(k.s)}),e.jsxs("div",{className:`
                                                p-4 rounded-2xl border-2 border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-800 
                                                transition-all duration-200 flex items-center gap-4
                                                peer-checked:border-transparent peer-checked:ring-2 peer-checked:ring-offset-2 dark:peer-checked:ring-offset-slate-900 ${k.ring}
                                                peer-checked:shadow-md hover:bg-slate-50 dark:hover:bg-slate-700/50
                                            `,children:[e.jsxs("div",{className:`
                                                    w-12 h-12 rounded-xl flex items-center justify-center text-lg font-black text-white shadow-sm
                                                    ${k.color} transform group-hover:scale-110 transition-transform
                                                `,children:[k.s,"x"]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900 dark:text-white text-lg",children:k.label}),e.jsx("div",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:k.desc})]}),N===k.s&&e.jsx("div",{className:"ml-auto text-xl text-slate-900 dark:text-white font-bold animate-bounce-in",children:"‚úì"})]})]},k.s))})]}),e.jsxs("div",{className:"space-y-6 animate-fade-in",style:{animationDelay:"200ms"},children:[e.jsxs("div",{className:"flex items-center gap-4 justify-center md:justify-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 flex items-center justify-center font-bold text-sm",children:"2"}),e.jsx("h2",{className:"text-lg font-black uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Game Mode"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("button",{onClick:()=>a("PVP",N),className:"group relative overflow-hidden bg-white dark:bg-slate-800 p-6 rounded-[2rem] border-2 border-slate-100 dark:border-slate-700 hover:border-pink-400 hover:shadow-xl transition-all duration-300 text-left",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-pink-100 dark:bg-pink-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-pink-500 text-white flex items-center justify-center text-3xl shadow-lg group-hover:rotate-6 transition-transform",children:"üë•"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Vs Friend"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium text-sm",children:"Pass & Play"})]}),e.jsx("div",{className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity text-pink-500 font-bold",children:"Play ‚Üí"})]})]}),e.jsxs("button",{onClick:()=>a("PVB",N),className:"group relative overflow-hidden bg-white dark:bg-slate-800 p-6 rounded-[2rem] border-2 border-slate-100 dark:border-slate-700 hover:border-teal-400 hover:shadow-xl transition-all duration-300 text-left",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-teal-100 dark:bg-teal-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-teal-500 text-white flex items-center justify-center text-3xl shadow-lg group-hover:-rotate-6 transition-transform",children:"ü§ñ"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Vs Bot"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium text-sm",children:"Practice Mode"})]}),e.jsx("div",{className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity text-teal-500 font-bold",children:"Play ‚Üí"})]})]})]})]})]})]})})]}):e.jsxs("div",{className:"flex flex-col h-screen w-full bg-slate-50 dark:bg-[#0f172a] text-slate-900 dark:text-white relative overflow-hidden transition-colors duration-500",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-40",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-teal-400/20 dark:bg-teal-900/20 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-400/20 dark:bg-indigo-900/20 rounded-full blur-[100px]"})]}),e.jsxs("header",{className:"shrink-0 h-16 md:h-20 px-3 md:px-8 flex items-center justify-between z-30 bg-white/60 dark:bg-black/20 backdrop-blur-md border-b border-slate-200 dark:border-white/5 relative shadow-sm transition-colors duration-300",children:[e.jsx("div",{className:"flex-1 flex justify-start min-w-0",children:e.jsx(D,{playerId:c.ONE,alignment:"left"})}),e.jsxs("div",{className:"shrink-0 flex gap-2 mx-2",children:[e.jsx(_,{variant:"icon",size:"sm",onClick:W,title:"Back to Game Menu",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(ie,{})}),e.jsx(_,{variant:"icon",size:"sm",onClick:S,title:"Restart Game",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(oe,{})}),e.jsx(_,{variant:"icon",size:"sm",onClick:M,title:"Return to Menu",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(z,{})})]}),e.jsx("div",{className:"flex-1 flex justify-end min-w-0",children:e.jsx(D,{playerId:c.TWO,alignment:"right"})})]}),e.jsx("main",{className:"flex-1 h-full w-full relative z-10 overflow-hidden",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center p-2 perspective-1000",children:e.jsx("div",{className:`
                        relative aspect-square 
                        portrait:w-full portrait:max-h-full
                        landscape:h-full landscape:max-w-full
                        flex items-center justify-center
                    `,children:e.jsx("div",{className:"w-full h-screen flex items-center justify-center animate-fade-in",children:e.jsx(le,{})})})})}),i&&!h&&e.jsx("div",{className:"absolute top-24 left-1/2 -translate-x-1/2 z-50 animate-bounce-in w-full px-4 max-w-sm",children:e.jsxs("div",{className:"bg-amber-100 text-amber-900 px-6 py-4 rounded-2xl shadow-xl font-bold flex items-center justify-between gap-3 border-l-4 border-amber-500",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"text-sm leading-tight",children:["No moves for ",m==="BLACK"?"Black":"White","!",e.jsx("br",{}),e.jsx("span",{className:"font-normal opacity-80",children:"Turn passed automatically."})]})]}),e.jsx("button",{onClick:l,className:"w-8 h-8 bg-black/5 rounded-full flex items-center justify-center hover:bg-black/10 transition-colors",children:"‚úï"})]})}),e.jsx(ne,{})]})};export{ce as ReversiGame};
