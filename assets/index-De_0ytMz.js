import{P as d,c as ee,p as O,u as $,r as v,j as e,R as te,f as W,B as I,V as F}from"./index-DEtwQE4Q.js";import{B as y,a as j,W as z,A as M,D as q,b as J,C as V}from"./constants-BaSUZPMo.js";import{H as se,G as ne}from"./GameConfigFooter-D5MaQQX6.js";var b=(t=>(t.IDLE="IDLE",t.PLAYING="PLAYING",t.WON="WON",t.DRAW="DRAW",t))(b||{});const X=()=>{const t=new Set;for(;t.size<y*j;)t.add(Math.floor(Math.random()*99)+1);const r=Array.from(t).sort(()=>Math.random()-.5),s=[];for(let l=0;l<y;l++){const c=[];for(let n=0;n<j;n++)c.push({row:l,col:n,value:r[l*j+n],owner:null,isWinningCell:!1});s.push(c)}return s},P=(t,r)=>{for(let s=y-1;s>=0;s--)if(t[s][r].owner===null)return s;return-1},Q=t=>{const r=[[0,1],[1,0],[1,1],[1,-1]];for(let s=0;s<y;s++)for(let l=0;l<j;l++){const c=t[s][l].owner;if(c)for(const[n,a]of r){let o=1;const i=[{row:s,col:l}];for(let m=1;m<z;m++){const x=s+n*m,p=l+a*m;if(x>=0&&x<y&&p>=0&&p<j&&t[x][p].owner===c)o++,i.push({row:x,col:p});else break}if(o>=z)return{winner:c,winningCells:i}}}return{winner:null,winningCells:[]}},ae=t=>t[0].every(r=>r.owner!==null),re=3,B=(t,r)=>{let s=0;r===d.ONE?d.TWO:d.ONE;let l=0,c=0,n=0;for(const a of t)a===r?l++:a===null?c++:n++;return l===4?s+=100:l===3&&c===1?s+=5:l===2&&c===2&&(s+=2),n===3&&c===1&&(s-=4),s},le=(t,r)=>{let s=0;for(let n=0;n<y;n++)for(let a=0;a<j-3;a++){const o=[t[n][a].owner,t[n][a+1].owner,t[n][a+2].owner,t[n][a+3].owner];s+=B(o,r)}for(let n=0;n<j;n++)for(let a=0;a<y-3;a++){const o=[t[a][n].owner,t[a+1][n].owner,t[a+2][n].owner,t[a+3][n].owner];s+=B(o,r)}for(let n=0;n<y-3;n++)for(let a=0;a<j-3;a++){const o=[t[n][a].owner,t[n+1][a+1].owner,t[n+2][a+2].owner,t[n+3][a+3].owner];s+=B(o,r)}for(let n=0;n<y-3;n++)for(let a=0;a<j-3;a++){const o=[t[n+3][a].owner,t[n+2][a+1].owner,t[n+1][a+2].owner,t[n][a+3].owner];s+=B(o,r)}const l=Math.floor(j/2);let c=0;for(let n=0;n<y;n++)t[n][l].owner===r&&c++;return s+=c*3,s},R=(t,r,s,l,c,n)=>{const a=n===d.ONE?d.TWO:d.ONE,o=Q(t);if(o.winner===n)return 1e5;if(o.winner===a)return-1e5;if(t[0].every(i=>i.owner!==null))return 0;if(r===0)return le(t,n);if(c){let i=-1/0;for(let m=0;m<j;m++){const x=P(t,m);if(x!==-1){const p=t.map(u=>u.map(k=>({...k})));p[x][m].owner=n;const f=R(p,r-1,s,l,!1,n);if(i=Math.max(i,f),s=Math.max(s,i),s>=l)break}}return i}else{let i=1/0;for(let m=0;m<j;m++){const x=P(t,m);if(x!==-1){const p=t.map(u=>u.map(k=>({...k})));p[x][m].owner=a;const f=R(p,r-1,s,l,!0,n);if(i=Math.min(i,f),l=Math.min(l,i),l<=s)break}}return i}},oe=(t,r)=>{let s=-1/0,l=Math.floor(j/2);const c=[];for(let n=0;n<j;n++)P(t,n)!==-1&&c.push(n);c.sort(()=>Math.random()-.5);for(const n of c){const a=P(t,n),o=t.map(m=>m.map(x=>({...x})));o[a][n].owner=r;const i=R(o,re,-1/0,1/0,!1,r);i>s&&(s=i,l=n)}return l},U="connect4-state-v1",D=t=>{if(typeof window<"u"){const{board:r,turn:s,status:l,winner:c,winningLine:n,players:a,gameMode:o,botStats:i,pvpStats:m,themeId:x,characterSetId:p}=t,f={board:r,turn:s,status:l,winner:c,winningLine:n,players:a,gameMode:o,botStats:i,pvpStats:m,themeId:x,characterSetId:p};window.localStorage.setItem(U,JSON.stringify(f))}},ie=()=>{const t={status:b.IDLE,gameMode:"PVP",themeId:"KIDS",characterSetId:M[0].id,turn:d.ONE,board:X(),winner:null,winningLine:[],players:{[d.ONE]:{id:d.ONE,name:"Player 1",score:0},[d.TWO]:{id:d.TWO,name:"Player 2",score:0}},botStats:{playerWins:0,botWins:0},pvpStats:{player1Wins:0,player2Wins:0},hasSavedGame:!1,isBotThinking:!1};if(typeof window<"u")try{const r=window.localStorage.getItem(U);if(r){const s=JSON.parse(r);if(s.botStats&&(t.botStats=s.botStats),s.pvpStats&&(t.pvpStats=s.pvpStats),s.gameMode&&(t.gameMode=s.gameMode),s.themeId&&(t.themeId=s.themeId),s.characterSetId&&(t.characterSetId=s.characterSetId),s.status===b.PLAYING)return{...t,...s,status:b.IDLE,hasSavedGame:!0,isDropping:!1,isBotThinking:!1,pendingColumn:null}}}catch(r){console.warn("Failed to load Connect 4 state",r)}return t},g=ee((t,r)=>({...ie(),pendingColumn:null,isDropping:!1,startGame:(s="PVP")=>{O("start");const{players:l,botStats:c,pvpStats:n}=r(),a={...l};if(s==="PVB")a[d.ONE]={...a[d.ONE],name:"You",score:c.playerWins},a[d.TWO]={...a[d.TWO],name:"Bot",score:c.botWins};else{const i=$.getState().players;a[d.ONE]={...a[d.ONE],name:i[d.ONE].name,score:n.player1Wins},a[d.TWO]={...a[d.TWO],name:i[d.TWO].name,score:n.player2Wins}}const o={status:b.PLAYING,gameMode:s,board:X(),winner:null,winningLine:[],turn:d.ONE,pendingColumn:null,isDropping:!1,isBotThinking:!1,hasSavedGame:!1,players:a};t(o),D({...r(),...o})},setTheme:s=>{O("click"),t({themeId:s}),D({...r(),themeId:s})},setCharacterSet:s=>{O("click"),t({characterSetId:s}),D({...r(),characterSetId:s})},resumeGame:()=>{O("click"),t({status:b.PLAYING});const{turn:s,gameMode:l}=r();l==="PVB"&&s===d.TWO&&setTimeout(()=>r().dropToken(-1),500)},resetGame:()=>{O("click"),t({status:b.IDLE,hasSavedGame:r().status===b.PLAYING,pendingColumn:null,isDropping:!1,isBotThinking:!1})},setPendingColumn:s=>{t({pendingColumn:s})},dropToken:s=>{const{board:l,turn:c,status:n,isDropping:a,gameMode:o,isBotThinking:i}=r();if(n!==b.PLAYING||a)return;let m=s;if(o==="PVB"&&c===d.TWO){if(i||s!==-1)return;t({isBotThinking:!0}),setTimeout(()=>{const p=oe(l,d.TWO),{isDropping:f}=r();if(!f){t({isBotThinking:!1});const u=P(l,p);if(u===-1)return;H(p,u)}},600);return}const x=P(l,m);x!==-1&&H(m,x)},checkWin:()=>{const{board:s,turn:l,players:c,gameMode:n,botStats:a,pvpStats:o}=r(),i=Q(s);let m={};if(i.winner){O("win");const x=s.map(k=>k.map(w=>({...w})));i.winningCells.forEach(({row:k,col:w})=>{x[k][w].isWinningCell=!0});const p={...c};p[i.winner].score+=1;let f=a,u=o;n==="PVB"?(i.winner===d.ONE&&(f={...a,playerWins:a.playerWins+1}),i.winner===d.TWO&&(f={...a,botWins:a.botWins+1})):(i.winner===d.ONE&&(u={...o,player1Wins:o.player1Wins+1}),i.winner===d.TWO&&(u={...o,player2Wins:o.player2Wins+1})),m={status:b.WON,winner:i.winner,winningLine:i.winningCells,board:x,players:p,botStats:f,pvpStats:u,pendingColumn:null,hasSavedGame:!1}}else if(ae(s))m={status:b.DRAW,hasSavedGame:!1};else{const x=l===d.ONE?d.TWO:d.ONE;m={turn:x},n==="PVB"&&x===d.TWO&&setTimeout(()=>r().dropToken(-1),100)}t(m),D({...r(),...m})},syncPlayers:s=>{t(l=>l.gameMode==="PVB"?{players:{[d.ONE]:{...l.players[d.ONE],name:"You"},[d.TWO]:{...l.players[d.TWO],name:"Bot"}}}:{players:{[d.ONE]:{...l.players[d.ONE],name:s[d.ONE].name},[d.TWO]:{...l.players[d.TWO],name:s[d.TWO].name}}})}})),H=(t,r)=>{const s=g.getState(),{board:l,turn:c}=s,n=q+r*J;O("tap"),g.setState({isDropping:!0,pendingColumn:null});const a=l.map(o=>o.map(i=>({...i})));a[r][t].owner=c,g.setState({board:a}),D({...s,board:a}),setTimeout(()=>{O("drop"),g.getState().checkWin(),g.setState({isDropping:!1})},n)},de=v.memo(({data:t,colIndex:r,onColumnClick:s,isValidTarget:l,previewPlayerId:c,theme:n,customIcon:a})=>{const{owner:o,value:i,isWinningCell:m,row:x}=t,p=o||c,f=p?n.players[p]:null,u=!o&&!!c,k=a||(f==null?void 0:f.icon),w=!!k,S="text-[clamp(12px,4vmin,32px)] leading-none",T=!u&&o?{"--drop-offset":`calc(${(x+1.5)*-110}%)`,animationDuration:`${q+x*J}ms`,zIndex:50,willChange:"transform"}:void 0,E=`
    relative 
    w-full max-h-full
    aspect-square
    rounded-full 
    ${n.cell.base}
    shadow-[inset_0_8px_8px_-4px_rgba(0,0,0,0.3),_inset_0_3px_5px_rgba(0,0,0,0.1)]
    dark:shadow-[inset_0_8px_12px_-4px_rgba(0,0,0,0.8),_inset_0_2px_4px_rgba(0,0,0,0.5)]
    flex items-center justify-center 
    transition-all duration-300
    ${u?`ring-2 ${n.cell.ring}`:""}
  `;return e.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:E,style:{containerType:"size"},children:[!o&&e.jsx("div",{className:`absolute inset-0 flex items-center justify-center select-none ${u?"opacity-20":""}`,children:e.jsx("span",{className:`text-slate-400 dark:text-slate-600 font-bold ${S} drop-shadow-sm opacity-50`,children:i})}),p&&f&&e.jsxs(e.Fragment,{children:[u&&e.jsx("div",{className:`
                    absolute inset-0 rounded-full
                    ${w?"bg-white/20":`bg-gradient-to-br ${f.gradient}`}
                    opacity-50
                    animate-ping
                 `}),e.jsxs("div",{style:T,className:`
                absolute 
                flex items-center justify-center
                ${u?"opacity-90 scale-90 z-10":"animate-drop-rotate"}
                
                ${w?"inset-[-5%] z-20":`inset-[10%] rounded-full bg-gradient-to-br ${f.gradient} shadow-[inset_0_2px_3px_rgba(255,255,255,0.4),_inset_0_-3px_3px_rgba(0,0,0,0.3)] border border-black/10`}
              `,children:[!u&&!w&&e.jsx("div",{className:"absolute top-[10%] left-[10%] w-[30%] h-[15%] bg-white/30 rounded-full blur-[1px]"}),w?e.jsx("span",{className:`
                            select-none transform transition-transform leading-none
                            ${m?"animate-pulse scale-110":""}
                        `,style:{fontSize:"90cqmin"},children:k}):e.jsx("span",{className:`text-white font-extrabold ${S} drop-shadow-[0_1px_2px_rgba(0,0,0,0.3)]`,children:i})]})]}),m&&!w&&e.jsx("div",{className:"absolute inset-0 rounded-full ring-4 ring-white/60 animate-pulse z-20 shadow-[0_0_20px_rgba(255,255,255,0.5)]"})]})})},(t,r)=>t.data===r.data&&t.isValidTarget===r.isValidTarget&&t.previewPlayerId===r.previewPlayerId&&t.colIndex===r.colIndex&&t.theme.name===r.theme.name&&t.customIcon===r.customIcon),ce=v.memo(({colIndex:t,isInteractable:r,isPending:s,onClick:l,onMouseEnter:c})=>e.jsx("div",{className:`
      flex-1 h-full 
      hover:bg-black/5 dark:hover:bg-white/5 
      transition-colors 
      cursor-pointer
      rounded-lg
      ${r?"pointer-events-auto":"pointer-events-none"}
      ${s?"bg-black/5 dark:bg-white/5 ring-1 ring-indigo-400/30":""}
    `,onClick:l,onMouseEnter:c,title:"Tap to drop",role:"button",tabIndex:r?0:-1,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&r&&l()}})),me=v.memo(()=>{const t=g(h=>h.board),r=g(h=>h.dropToken),s=g(h=>h.status),l=g(h=>h.turn),c=g(h=>h.pendingColumn),n=g(h=>h.setPendingColumn),a=g(h=>h.isDropping),o=g(h=>h.themeId),i=g(h=>h.characterSetId),m=$(h=>h.enableTilt),x=V[o],p=v.useMemo(()=>M.find(h=>h.id===i)||M[0],[i]),[f,u]=v.useState(null),k=s===b.PLAYING&&!a,w=f,S=v.useCallback(h=>{const N=g.getState();N.status!==b.PLAYING||N.isDropping||(r(h),u(null))},[r,n]),T=v.useCallback(h=>{u(h)},[]),E=v.useCallback(()=>{u(null)},[]),C=v.useMemo(()=>w!==null?P(t,w):-1,[t,w]),Z=v.useMemo(()=>Array.from({length:j},(h,N)=>({onClick:()=>S(N),onMouseEnter:()=>T(N)})),[S,T]);return e.jsx("div",{className:"relative group w-full h-full flex items-center justify-center p-4 perspective-1000",children:e.jsxs("div",{className:`
          relative
          ${x.board.background}
          rounded-2xl
          p-2 sm:p-3
          ${x.board.shadow}
          ring-1 ${x.board.border}
          transition-all duration-500 ease-out
          flex flex-col
          overflow-hidden
        `,style:{width:"100%",maxWidth:"100%",aspectRatio:"1/1",transform:m?"rotateX(5deg)":"none"},children:[["top-2 left-2","top-2 right-2","bottom-2 left-2","bottom-2 right-2"].map(h=>e.jsx("div",{className:`absolute ${h} w-1.5 h-1.5 sm:w-2.5 sm:h-2.5 rounded-full ${x.board.screws} shadow-[inset_0_1px_1px_rgba(0,0,0,0.1)] dark:shadow-[inset_0_1px_1px_rgba(255,255,255,0.1)] z-10`},h)),e.jsxs("div",{className:"grid gap-1 sm:gap-2 w-full h-full relative",style:{gridTemplateColumns:`repeat(${j}, minmax(0, 1fr))`,gridTemplateRows:`repeat(${y}, minmax(0, 1fr))`,touchAction:"none"},onMouseLeave:E,children:[t.map((h,N)=>e.jsx(te.Fragment,{children:h.map((L,A)=>{const G=k&&A===w&&N===C;let _;return o==="KIDS"&&(L.owner===d.ONE?_=p.p1:L.owner===d.TWO?_=p.p2:G&&l===d.ONE?_=p.p1:G&&l===d.TWO&&(_=p.p2)),e.jsx("div",{className:"flex items-center justify-center w-full h-full min-h-0 min-w-0",children:e.jsx(de,{data:L,colIndex:A,onColumnClick:S,isValidTarget:!0,previewPlayerId:G?l:null,theme:x,customIcon:_})},`${N}-${A}`)})},N)),e.jsx("div",{className:"absolute inset-0 z-30 flex gap-1 sm:gap-2 pointer-events-none h-full w-full",children:Z.map((h,N)=>e.jsx(ce,{colIndex:N,isInteractable:k,isPending:c===N,onClick:h.onClick,onMouseEnter:h.onMouseEnter},N))})]}),m&&e.jsx("div",{className:"absolute -z-10 -bottom-4 left-4 right-4 h-6 bg-slate-300 dark:bg-slate-800 rounded-b-2xl transform skew-x-12 opacity-80 shadow-2xl"})]})})}),Y=v.memo(({playerId:t,alignment:r})=>{const s=g(u=>u.players[t]),l=g(u=>u.turn),c=g(u=>u.winner),n=g(u=>u.themeId),a=g(u=>u.characterSetId),o=V[n].players[t],i=v.useMemo(()=>M.find(u=>u.id===a)||M[0],[a]),m=l===t,x=c===t,p=r==="right",f=n==="KIDS"?t===d.ONE?i.p1:i.p2:o.icon;return e.jsxs("div",{className:`
        flex items-center gap-3 md:gap-4
        transition-all duration-300
        ${p?"flex-row-reverse text-right":"flex-row text-left"}
        ${m?"opacity-100 scale-105":"opacity-50 grayscale-[0.5] scale-100"}
      `,children:[e.jsxs("div",{className:`
          relative
          w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl
          flex items-center justify-center
          bg-gradient-to-br ${o.gradient}
          shadow-lg ${m?o.shadowColor:"shadow-none"}
          border-2 ${m?"border-white":"border-transparent"}
          transition-all duration-300
        `,children:[f?e.jsx("span",{className:"text-xl md:text-3xl filter drop-shadow-sm select-none font-emoji",children:f}):e.jsx("span",{className:"text-lg md:text-2xl font-black text-white select-none",children:s.name[0]}),x&&e.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce font-emoji",children:W("ðŸ‘‘")})]}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("h2",{className:`text-sm md:text-lg font-bold ${o.textColor} dark:text-white leading-tight transition-colors`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("div",{className:`
               px-2 py-0.5 rounded-md 
               bg-slate-200 border border-slate-300 text-slate-600
               dark:bg-slate-800/80 dark:border-slate-700 dark:text-slate-300
               text-[10px] md:text-xs font-mono
               transition-colors
             `,children:["Score: ",e.jsx("span",{className:"text-slate-900 dark:text-white font-bold",children:s.score})]}),m&&!c&&e.jsx("div",{className:`
                 hidden sm:block px-2 py-0.5 rounded-full 
                 ${o.color} text-white 
                 text-[10px] font-bold uppercase tracking-wider animate-pulse
               `,children:"Turn"})]})]})]})}),xe=()=>{const{status:t,winner:r,startGame:s,resetGame:l,players:c,gameMode:n,themeId:a}=g(),{setView:o}=$(),[i,m]=v.useState(!1);if(v.useEffect(()=>{t===b.WON||t===b.DRAW?m(!0):m(!1)},[t]),!i||t!==b.WON&&t!==b.DRAW)return null;const x=r?V[a].players[r]:null,p=()=>{l(),o(F.HOME)},f=()=>{s(n)},u=r?c[r].name:"";return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-[2px] transition-opacity duration-300",onClick:()=>m(!1)}),e.jsxs("div",{className:"relative bg-white/50 dark:bg-slate-800/50 backdrop-blur-xl rounded-3xl p-8 max-w-md w-full text-center shadow-2xl border border-white/40 dark:border-slate-700/40 animate-bounce-in transform transition-all duration-300",children:[e.jsx("button",{onClick:()=>m(!1),className:"absolute top-4 right-4 p-2 text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white transition-colors bg-white/50 dark:bg-black/20 rounded-full",title:"Close to View Board",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),t===b.WON&&x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`mx-auto w-24 h-24 rounded-full bg-gradient-to-br ${x.gradient} flex items-center justify-center mb-6 shadow-xl`,children:e.jsx("span",{className:"text-5xl font-emoji",children:W("ðŸ†")})}),e.jsxs("h2",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 uppercase tracking-tight drop-shadow-sm",children:[u," Wins!"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-8 font-medium",children:"A spectacular victory on the grid."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto w-24 h-24 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-5xl font-emoji",children:W("ðŸ¤")})}),e.jsx("h2",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 drop-shadow-sm",children:"Draw!"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-8 font-medium",children:"The board is full. No more moves."})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(I,{onClick:f,size:"lg",className:"w-full shadow-lg !bg-indigo-600 hover:!bg-indigo-500",children:"Play Again"}),e.jsx(I,{onClick:p,variant:"secondary",className:"w-full !bg-white/50 dark:!bg-black/20 hover:!bg-white/80 dark:hover:!bg-black/40",children:"Back to Menu"})]})]})]})},K=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),ue=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),he=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),we=()=>{const{status:t,startGame:r,resumeGame:s,resetGame:l,syncPlayers:c,hasSavedGame:n,gameMode:a,themeId:o,setTheme:i,characterSetId:m,setCharacterSet:x}=g(),{setView:p,players:f}=$(),[u,k]=v.useState(!1),[w,S]=v.useState("PVP");v.useEffect(()=>{c(f)},[f,c]);const T=()=>{l(),p(F.HOME)},E=()=>{l()};return t===b.IDLE?u?e.jsx(se,{gameId:"connect-4",onBack:()=>k(!1)}):e.jsxs("div",{className:"flex flex-col h-screen w-full bg-slate-50 dark:bg-[#0f172a] text-slate-900 dark:text-white relative overflow-hidden transition-colors duration-500",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-40",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-400/20 dark:bg-indigo-900/20 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-amber-400/20 dark:bg-amber-900/20 rounded-full blur-[100px]"})]}),e.jsxs("header",{className:"shrink-0 h-16 md:h-20 px-4 md:px-8 flex items-center justify-between z-30 bg-white/50 dark:bg-slate-900/50 backdrop-blur-md sticky top-0 border-b border-slate-200/50 dark:border-white/5",children:[e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(I,{variant:"icon",size:"sm",onClick:T,title:"Return to Menu",children:e.jsx(K,{})})}),e.jsx("div",{className:"flex-1"})]}),e.jsx("div",{className:"flex-1 w-full overflow-y-auto p-4 md:p-8 pb-32",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 text-center relative z-20",children:[e.jsxs("div",{className:"space-y-4 animate-fade-in pt-4",children:[e.jsx("div",{className:`
                              inline-flex items-center justify-center w-24 h-24 rounded-[2rem] shadow-2xl mb-4 rotate-6 border-[6px] 
                              ${o==="KIDS"?"bg-indigo-50 border-indigo-200 dark:bg-slate-800 dark:border-slate-700":"bg-white dark:bg-slate-800 border-rose-500"}
                              transition-colors duration-300
                          `,children:e.jsx("span",{className:"text-6xl font-emoji",children:o==="KIDS"?W("ðŸ»"):W("ðŸ”´")})}),e.jsx("h1",{className:"text-5xl md:text-6xl font-black text-slate-900 dark:text-white tracking-tighter drop-shadow-sm",children:"Connect 4"}),e.jsx("p",{className:"text-lg md:text-xl text-slate-600 dark:text-slate-400 font-medium max-w-lg mx-auto leading-relaxed",children:"Drop pieces to connect four in a row. Simple rules, deep strategy."})]}),n&&e.jsxs("div",{className:"animate-pop",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-xl border-l-8 border-indigo-500 flex flex-col sm:flex-row items-center justify-between gap-6 max-w-2xl mx-auto ring-1 ring-slate-900/5",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white",children:"Game in Progress"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Resume your match"})]}),e.jsx(I,{onClick:s,size:"lg",className:"w-full sm:w-auto !bg-indigo-500 hover:!bg-indigo-400 whitespace-nowrap !rounded-xl !py-4 !px-8 text-lg shadow-lg shadow-indigo-500/30",children:"Continue Game"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-8 mb-4 max-w-2xl mx-auto",children:[e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Or Start New Game"}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-slate-200 dark:bg-slate-800 p-1.5 rounded-2xl inline-flex shadow-inner",children:[e.jsx("button",{onClick:()=>i("KIDS"),className:`
                                      px-6 py-2.5 rounded-xl text-sm font-bold uppercase tracking-wider transition-all
                                      ${o==="KIDS"?"bg-indigo-500 text-white shadow-md transform scale-105":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}
                                  `,children:"ðŸ§¸ Kiddo"}),e.jsx("button",{onClick:()=>i("STANDARD"),className:`
                                      px-6 py-2.5 rounded-xl text-sm font-bold uppercase tracking-wider transition-all
                                      ${o==="STANDARD"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-md transform scale-105":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}
                                  `,children:"ðŸ”´ Classic"})]})}),o==="KIDS"&&e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Choose Characters"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:M.map(C=>e.jsxs("button",{onClick:()=>x(C.id),className:`
                                              group flex flex-col items-center gap-2 p-4 rounded-2xl border-2 transition-all font-emoji
                                              ${m===C.id?"bg-indigo-50 dark:bg-indigo-900/30 border-indigo-500 shadow-md transform scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-700"}
                                          `,children:[e.jsxs("div",{className:"flex items-center gap-2 text-4xl group-hover:scale-110 transition-transform",children:[e.jsx("span",{children:C.p1}),e.jsx("span",{className:"text-base text-slate-300 font-sans",children:"vs"}),e.jsx("span",{children:C.p2})]}),e.jsx("span",{className:`text-xs font-bold uppercase tracking-wide font-sans ${m===C.id?"text-indigo-600 dark:text-indigo-400":"text-slate-500"}`,children:C.name})]},C.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto animate-fade-in",style:{animationDelay:"100ms"},children:[e.jsxs("button",{onClick:()=>S("PVP"),className:`
                                  group relative overflow-hidden p-6 rounded-[2rem] border-2 transition-all duration-300 text-left
                                  ${w==="PVP"?"bg-white dark:bg-slate-800 border-pink-500 ring-4 ring-pink-500/20 shadow-xl scale-[1.02]":"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 hover:border-pink-300"}
                              `,children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-pink-100 dark:bg-pink-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-pink-500 text-white flex items-center justify-center text-3xl shadow-lg group-hover:rotate-6 transition-transform font-emoji",children:W("ðŸ‘¥")}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Vs Friend"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium text-sm",children:"Pass & Play"})]}),w==="PVP"&&e.jsx("div",{className:"ml-auto text-2xl text-pink-500 font-bold animate-bounce-in",children:"âœ“"})]})]}),e.jsxs("button",{onClick:()=>S("PVB"),className:`
                                  group relative overflow-hidden p-6 rounded-[2rem] border-2 transition-all duration-300 text-left
                                  ${w==="PVB"?"bg-white dark:bg-slate-800 border-indigo-500 ring-4 ring-indigo-500/20 shadow-xl scale-[1.02]":"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 hover:border-indigo-300"}
                              `,children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-100 dark:bg-indigo-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-500 text-white flex items-center justify-center text-3xl shadow-lg group-hover:-rotate-6 transition-transform font-emoji",children:W("ðŸ¤–")}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Vs Bot"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium text-sm",children:"Challenge Mode"})]}),w==="PVB"&&e.jsx("div",{className:"ml-auto text-2xl text-indigo-500 font-bold animate-bounce-in",children:"âœ“"})]})]})]})]})}),e.jsx(ne,{onStart:()=>r(w),onHowToPlay:()=>k(!0),startLabel:"Start Game",startColorClass:w==="PVP"?"!bg-pink-500 hover:!bg-pink-400":"!bg-indigo-500 hover:!bg-indigo-400"})]}):e.jsxs("div",{className:"flex flex-col h-screen w-full relative",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[60%] h-[60%] bg-indigo-200/40 dark:bg-indigo-900/10 rounded-full blur-[100px] animate-pulse",style:{animationDuration:"8s"}}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-rose-200/40 dark:bg-rose-900/10 rounded-full blur-[100px] animate-pulse",style:{animationDuration:"10s"}})]}),e.jsxs("header",{className:"shrink-0 h-16 md:h-20 px-3 md:px-8 flex items-center justify-between z-30 bg-white/60 dark:bg-slate-900/40 backdrop-blur-md border-b border-slate-200 dark:border-white/5 relative shadow-sm transition-colors duration-300",children:[e.jsx("div",{className:"flex-1 flex justify-start min-w-0",children:e.jsx(Y,{playerId:d.ONE,alignment:"left"})}),e.jsxs("div",{className:"shrink-0 flex gap-2 mx-2",children:[e.jsx(I,{variant:"icon",size:"sm",onClick:E,title:"Back to Game Menu",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(ue,{})}),e.jsx(I,{variant:"icon",size:"sm",onClick:()=>r(a),title:"Restart Game",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(he,{})}),e.jsx(I,{variant:"icon",size:"sm",onClick:T,title:"Return to Menu",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(K,{})})]}),e.jsx("div",{className:"flex-1 flex justify-end min-w-0",children:e.jsx(Y,{playerId:d.TWO,alignment:"right"})})]}),e.jsx("main",{className:"flex-1 h-screen w-screen flex items-center justify-center p-2 pb-20 relative z-10 perspective-1000",children:e.jsx("div",{className:`
            relative aspect-square 
            portrait:w-full portrait:max-h-full
            landscape:h-full landscape:max-w-full
            flex items-center justify-center
         `,children:e.jsx("div",{className:"w-full h-screen flex items-center justify-center animate-fade-in",children:e.jsx(me,{})})})}),e.jsx(xe,{})]})};export{we as ConnectFourGame};
