import{f as w,P as i,c as X,p as _,u as L,r as p,j as e,B as C,V as F}from"./index-D9NncJjq.js";import{H as ee,G as D}from"./GameConfigFooter-lfpOecX0.js";var g=(t=>(t.IDLE="IDLE",t.PLAYING="PLAYING",t.WON="WON",t.DRAW="DRAW",t))(g||{});const A=6,E=[{id:"bear-tiger",name:"Forest Kings",p1:w("üêª"),p2:w("üêØ")},{id:"cat-dog",name:"Pet Pals",p1:w("üê±"),p2:w("üê∂")},{id:"lion-zebra",name:"Safari",p1:w("ü¶Å"),p2:w("ü¶ì")},{id:"bunny-fox",name:"Meadow",p1:w("üê∞"),p2:w("ü¶ä")},{id:"frog-pig",name:"Farm",p1:w("üê∏"),p2:w("üê∑")},{id:"unicorn-dragon",name:"Fantasy",p1:w("ü¶Ñ"),p2:w("üê≤")}],P={gradient:"from-gray-500 to-gray-600",textColor:"text-gray-500",borderColor:"border-gray-500",shadowColor:"shadow-none"},R={STANDARD:{name:"Classic",board:{container:"bg-slate-300 dark:bg-[#334155] border-slate-400 dark:border-[#475569] shadow-[0_30px_60px_-15px_rgba(0,0,0,0.3),_0_12px_0_#94a3b8] dark:shadow-[0_30px_60px_-15px_rgba(0,0,0,0.7),_0_12px_0_#1e293b]",surface:"bg-gradient-to-br from-white/40 to-transparent dark:from-white/5",grid:"bg-slate-400 dark:bg-[#0f172a] border-slate-400/50 dark:border-slate-700/50 shadow-[inset_0_2px_10px_rgba(0,0,0,0.2)] dark:shadow-[inset_0_2px_10px_rgba(0,0,0,0.5)]"},cell:{bg:"bg-slate-200 dark:bg-[#1e293b]",hole:"bg-slate-300 dark:bg-[#020617]",starPoint:"bg-slate-400 dark:bg-teal-500/30"},pieces:{BLACK:{gradient:"from-[#334155] via-[#1e293b] to-[#020617]",border:"border-slate-600/30",label:"Black",icon:""},WHITE:{gradient:"from-white via-[#f1f5f9] to-[#cbd5e1]",border:"border-white/60",label:"White",icon:""}},playerPanel:{[i.ONE]:{gradient:"from-slate-700 to-black",textColor:"text-slate-800 dark:text-slate-300",borderColor:"border-slate-600",shadowColor:"shadow-slate-900/50"},[i.TWO]:{gradient:"from-white to-slate-300",textColor:"text-slate-800 dark:text-slate-200",borderColor:"border-white",shadowColor:"shadow-slate-200/50"},[i.THREE]:P,[i.FOUR]:P}},KIDS:{name:"Chess Kiddo",board:{container:"bg-slate-100 dark:bg-slate-800 border-indigo-200 dark:border-slate-700 shadow-[0_30px_60px_-15px_rgba(99,102,241,0.25),_0_12px_0_#cbd5e1] dark:shadow-[0_30px_60px_-15px_rgba(0,0,0,0.5),_0_12px_0_#1e293b]",surface:"bg-gradient-to-br from-white/80 to-white/20",grid:"bg-indigo-100 dark:bg-slate-900 border-indigo-200/50 dark:border-slate-700 shadow-[inset_0_2px_10px_rgba(0,0,0,0.05)]"},cell:{bg:"bg-white dark:bg-slate-700",hole:"bg-indigo-50 dark:bg-slate-950",starPoint:"bg-indigo-300 dark:bg-indigo-500"},pieces:{BLACK:{gradient:"from-indigo-400 via-indigo-500 to-indigo-600",border:"border-indigo-300/50",label:"Indigo"},WHITE:{gradient:"from-amber-300 via-amber-400 to-amber-500",border:"border-amber-200/50",label:"Amber"}},playerPanel:{[i.ONE]:{gradient:"from-indigo-400 to-indigo-600",textColor:"text-indigo-700 dark:text-indigo-300",borderColor:"border-indigo-400",shadowColor:"shadow-indigo-500/50"},[i.TWO]:{gradient:"from-amber-300 to-amber-500",textColor:"text-amber-700 dark:text-amber-300",borderColor:"border-amber-400",shadowColor:"shadow-amber-500/50"},[i.THREE]:P,[i.FOUR]:P}}},Z=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],U=t=>{const a=[];for(let r=0;r<t;r++){const n=[];for(let m=0;m<t;m++)n.push({row:r,col:m,owner:null,isValidMove:!1,isFlipping:!1});a.push(n)}const s=Math.floor(t/2);return s>0&&(a[s-1][s-1].owner="WHITE",a[s-1][s].owner="BLACK",a[s][s-1].owner="BLACK",a[s][s].owner="WHITE"),a},H=(t,a,s,r)=>{const n=t.length;if(a<0||a>=n||s<0||s>=n||t[a][s].owner!==null)return!1;const m=r==="BLACK"?"WHITE":"BLACK";for(const[h,o]of Z){let l=a+h,d=s+o,x=!1;for(;l>=0&&l<n&&d>=0&&d<n;){const c=t[l][d].owner;if(c===m)x=!0;else if(c===r){if(x)return!0;break}else break;l+=h,d+=o}}return!1},q=(t,a)=>t.map(s=>s.map(r=>({...r,isValidMove:H(t,r.row,r.col,a)}))),$=(t,a)=>{const s=t.length;for(let r=0;r<s;r++)for(let n=0;n<s;n++)if(H(t,r,n,a))return!0;return!1},te=(t,a,s,r)=>{const n=t.length,m=t.map(l=>l.map(d=>({...d})));m[a][s].owner=r,m[a][s].isFlipping=!0;const h=r==="BLACK"?"WHITE":"BLACK";let o=0;for(const[l,d]of Z){let x=a+l,c=s+d;const b=[];for(;x>=0&&x<n&&c>=0&&c<n;){const u=m[x][c].owner;if(u===h)b.push({r:x,c});else if(u===r){b.length>0&&b.forEach(k=>{m[k.r][k.c].owner=r,m[k.r][k.c].isFlipping=!0,o++});break}else break;x+=l,c+=d}}return{newBoard:m,flippedCount:o}},se=t=>{let a=0,s=0;return t.forEach(r=>r.forEach(n=>{n.owner==="BLACK"&&a++,n.owner==="WHITE"&&s++})),{BLACK:a,WHITE:s}},ae=[[100,-20,10,-20,100],[-20,-30,-5,-30,-20],[10,-5,5,-5,10],[-20,-30,-5,-30,-20],[100,-20,10,-20,100]],re=[[100,-20,10,10,-20,100],[-20,-50,-2,-2,-50,-20],[10,-2,-1,-1,-2,10],[10,-2,-1,-1,-2,10],[-20,-50,-2,-2,-50,-20],[100,-20,10,10,-20,100]],le=[[100,-20,10,5,5,10,-20,100],[-20,-50,-2,-2,-2,-2,-50,-20],[10,-2,-1,-1,-1,-1,-2,10],[5,-2,-1,-1,-1,-1,-2,5],[5,-2,-1,-1,-1,-1,-2,5],[10,-2,-1,-1,-1,-1,-2,10],[-20,-50,-2,-2,-2,-2,-50,-20],[100,-20,10,5,5,10,-20,100]],ne=t=>t===5?ae:t===6?re:le,oe=(t,a)=>{const s=t.length,r=[];for(let o=0;o<s;o++)for(let l=0;l<s;l++)H(t,o,l,a)&&r.push({r:o,c:l});if(r.length===0)return null;let n=r[0],m=-1/0;const h=ne(s);r.sort(()=>Math.random()-.5);for(const o of r){let l=h[o.r][o.c];(o.r===0||o.r===s-1)&&(o.c===0||o.c===s-1)&&(l+=1e3),l>m&&(m=l,n=o)}return{row:n.r,col:n.c}},J="reversi-state-v2",M=t=>{if(typeof window<"u"){const{board:a,turn:s,status:r,winner:n,players:m,gameMode:h,boardSize:o,botStats:l,pvpStats:d,themeId:x,characterSetId:c}=t,b={board:a,turn:s,status:r,winner:n,players:m,gameMode:h,boardSize:o,botStats:l,pvpStats:d,themeId:x,characterSetId:c};window.localStorage.setItem(J,JSON.stringify(b))}},ie=()=>{const t={status:g.IDLE,gameMode:"PVP",boardSize:A,themeId:"KIDS",characterSetId:E[0].id,turn:"BLACK",board:U(A),winner:null,players:{[i.ONE]:{id:i.ONE,name:"Player 1",color:"BLACK",score:2},[i.TWO]:{id:i.TWO,name:"Player 2",color:"WHITE",score:2}},botStats:{playerWins:0,botWins:0},pvpStats:{player1Wins:0,player2Wins:0},possibleMoves:[],noMovesAlert:!1,hasSavedGame:!1,isBotThinking:!1};if(typeof window<"u")try{const a=window.localStorage.getItem(J);if(a){const s=JSON.parse(a);if(s.botStats&&(t.botStats=s.botStats),s.pvpStats&&(t.pvpStats=s.pvpStats),s.gameMode&&(t.gameMode=s.gameMode),s.boardSize&&(t.boardSize=s.boardSize),s.themeId&&(t.themeId=s.themeId),s.characterSetId&&(t.characterSetId=s.characterSetId),s.status===g.PLAYING)return{...t,...s,status:g.IDLE,hasSavedGame:!0,isBotThinking:!1}}}catch(a){console.warn("Failed to load Reversi state",a)}return t},j=X((t,a)=>({...ie(),startGame:(s="PVP",r)=>{_("start");const n=r||a().boardSize||A,m=U(n),h=q(m,"BLACK"),{players:o}=a(),l={...o};if(s==="PVB")l[i.ONE]={...l[i.ONE],name:"You",score:2},l[i.TWO]={...l[i.TWO],name:"Bot",score:2};else{const x=L.getState().players;l[i.ONE]={...l[i.ONE],name:x[i.ONE].name,score:2},l[i.TWO]={...l[i.TWO],name:x[i.TWO].name,score:2}}const d={status:g.PLAYING,gameMode:s,boardSize:n,board:h,turn:"BLACK",winner:null,players:l,noMovesAlert:!1,hasSavedGame:!1,isBotThinking:!1};t(d),M({...a(),...d})},setTheme:s=>{_("click"),t({themeId:s}),M({...a(),themeId:s})},setCharacterSet:s=>{_("click"),t({characterSetId:s}),M({...a(),characterSetId:s})},resumeGame:()=>{_("click"),t({status:g.PLAYING});const{turn:s,gameMode:r}=a();r==="PVB"&&s==="WHITE"&&setTimeout(()=>{const n=a();n.status===g.PLAYING&&n.turn==="WHITE"&&n.placeDisc(-1,-1)},500)},resetGame:()=>{_("click"),t({status:g.IDLE,hasSavedGame:a().status===g.PLAYING,noMovesAlert:!1,isBotThinking:!1})},placeDisc:(s,r)=>{const{board:n,turn:m,players:h,status:o,gameMode:l,isBotThinking:d}=a();if(o!==g.PLAYING)return;if(l==="PVB"&&m==="WHITE"){if(d||s!==-1)return;t({isBotThinking:!0}),setTimeout(()=>{const c=oe(n,"WHITE");c?V(c.row,c.col):V(-1,-1),t({isBotThinking:!1})},800);return}V(s,r)},syncPlayers:s=>{t(r=>r.gameMode==="PVB"?{players:{[i.ONE]:{...r.players[i.ONE],name:"You"},[i.TWO]:{...r.players[i.TWO],name:"Bot"}}}:{players:{[i.ONE]:{...r.players[i.ONE],name:s[i.ONE].name},[i.TWO]:{...r.players[i.TWO],name:s[i.TWO].name}}})},dismissAlert:()=>t({noMovesAlert:!1})})),V=(t,a)=>{const s=j.getState(),{board:r,turn:n,players:m,gameMode:h,botStats:o,pvpStats:l}=s,{newBoard:d,flippedCount:x}=te(r,t,a,n);x>0&&(_("drop"),setTimeout(()=>_("click"),200)),setTimeout(()=>{j.setState(N=>({board:N.board.map(B=>B.map(K=>({...K,isFlipping:!1})))}))},600);const c=se(d),b=n==="BLACK"?"WHITE":"BLACK";let u=$(d,b),k=b,T=!1,f=null,y=g.PLAYING,S=o,I=l;u||($(d,n)?(k=n,T=!0):(f=c.BLACK>c.WHITE?"BLACK":c.WHITE>c.BLACK?"WHITE":null,y=c.BLACK===c.WHITE?g.DRAW:g.WON,_("win"),h==="PVB"&&f?(f==="BLACK"&&(S={...o,playerWins:o.playerWins+1}),f==="WHITE"&&(S={...o,botWins:o.botWins+1})):f&&(f==="BLACK"&&(I={...l,player1Wins:l.player1Wins+1}),f==="WHITE"&&(I={...l,player2Wins:l.player2Wins+1}))));const W={board:y===g.PLAYING?q(d,k):d,turn:k,noMovesAlert:T,status:y,winner:f,players:{[i.ONE]:{...m[i.ONE],score:c.BLACK},[i.TWO]:{...m[i.TWO],score:c.WHITE}},hasSavedGame:y===g.PLAYING,botStats:S,pvpStats:I};j.setState(W),M({...s,...W}),y===g.PLAYING&&h==="PVB"&&k==="WHITE"&&setTimeout(()=>{const N=j.getState();N.status===g.PLAYING&&N.turn==="WHITE"&&N.placeDisc(-1,-1)},500)},de=p.memo(({owner:t,isValidMove:a,isFlipping:s,theme:r,blackIcon:n,whiteIcon:m})=>{const h=r.pieces.WHITE,o=r.pieces.BLACK,l=n||o.icon,d=m||h.icon,x=!!(l&&d),c=p.useMemo(()=>t==="BLACK"?"rotateY(180deg)":"rotateY(0deg)",[t]),b=p.useMemo(()=>({transform:s?`${c} translateZ(30px) scale(1.15)`:`${c} translateZ(2px)`}),[s,c]),u=p.useMemo(()=>({transform:s?"scale(0.6) translateY(20%)":"scale(1) translateY(5%)",opacity:s?.3:.6}),[s]);return e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center preserve-3d",children:[!t&&a&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:`
                w-[40%] h-[40%] rounded-full 
                bg-teal-500/30 dark:bg-teal-400/20 
                border border-teal-500/40 dark:border-teal-400/40
                shadow-[0_0_15px_rgba(20,184,166,0.3)] dark:shadow-[0_0_15px_rgba(45,212,191,0.2)]
                animate-pulse
             `})}),t&&!x&&e.jsx("div",{className:"absolute bottom-0 w-[80%] h-[80%] rounded-full bg-slate-900/40 dark:bg-black/60 blur-[4px] will-change-transform",style:u}),t&&e.jsxs("div",{className:"w-full h-full relative preserve-3d will-change-transform",style:{...b,transition:"transform 700ms cubic-bezier(0.34, 1.56, 0.64, 1)"},children:[e.jsx("div",{className:"absolute inset-0 backface-hidden",style:{transform:"rotateY(0deg) translateZ(1px)",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",borderRadius:x?"0":"9999px"},children:e.jsx("div",{className:`
                    absolute inset-0 flex items-center justify-center overflow-visible
                    ${x?"":`rounded-full bg-gradient-to-br ${h.gradient} border ${h.border} shadow-[inset_0_-2px_4px_rgba(0,0,0,0.1)]`}
                `,children:x?e.jsx("span",{className:"leading-none select-none transform",style:{fontSize:"85cqmin"},children:d}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-[15%] rounded-full border border-black/5 shadow-[inset_0_2px_4px_rgba(0,0,0,0.1)] pointer-events-none"}),e.jsx("div",{className:"absolute top-[5%] left-[20%] w-[60%] h-[30%] bg-gradient-to-b from-white to-transparent opacity-60 rounded-[50%] pointer-events-none"})]})})}),e.jsx("div",{className:"absolute inset-0 backface-hidden",style:{transform:"rotateY(180deg) translateZ(1px)",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",borderRadius:x?"0":"9999px"},children:e.jsx("div",{className:`
                    absolute inset-0 flex items-center justify-center overflow-visible
                    ${x?"":`rounded-full bg-gradient-to-br ${o.gradient} border ${o.border} shadow-[inset_0_-2px_4px_rgba(0,0,0,0.5)]`}
                `,children:x?e.jsx("span",{className:"leading-none select-none transform",style:{fontSize:"85cqmin"},children:l}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-[15%] rounded-full border border-white/10 shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)] pointer-events-none"}),e.jsx("div",{className:"absolute top-[5%] left-[20%] w-[60%] h-[30%] bg-gradient-to-b from-white to-transparent opacity-40 rounded-[50%] pointer-events-none"})]})})}),!x&&e.jsx("div",{className:"absolute inset-[1px] rounded-full border-[3px] border-slate-500/50 -z-10",style:{transform:"rotateY(90deg)",opacity:.5}})]})]})},(t,a)=>t.owner===a.owner&&t.isValidMove===a.isValidMove&&t.isFlipping===a.isFlipping&&t.theme.name===a.theme.name&&t.blackIcon===a.blackIcon&&t.whiteIcon===a.whiteIcon),ce=p.memo(({cell:t,isClickable:a,onPlace:s,boardSize:r,theme:n,blackIcon:m,whiteIcon:h})=>{const{row:o,col:l,owner:d,isValidMove:x,isFlipping:c}=t,b=a&&x,u=p.useCallback(()=>{b&&s(o,l)},[b,o,l,s]),k=p.useMemo(()=>d?!1:r===8?(o===2||o===6)&&(l===2||l===6):r===6?(o===1||o===4)&&(l===1||l===4):!1,[d,o,l,r]);return e.jsxs("div",{className:`
                relative 
                ${n.cell.bg}
                rounded-[4px] sm:rounded-md
                flex items-center justify-center 
                shadow-[inset_0_4px_6px_rgba(0,0,0,0.1),_0_1px_0_rgba(255,255,255,0.8)] dark:shadow-[inset_0_4px_6px_rgba(0,0,0,0.6),_0_1px_0_rgba(255,255,255,0.1)]
                border-t border-black/5 dark:border-black/20
                border-b border-white/50 dark:border-white/5
            `,style:{containerType:"size"},children:[e.jsx("button",{type:"button",onClick:u,disabled:!b,className:`
                    absolute inset-0 z-50 w-full h-full 
                    focus:outline-none 
                    touch-manipulation
                    ${b?"cursor-pointer hover:bg-black/5 dark:hover:bg-white/5 active:bg-black/10":"cursor-default"}
                `,"aria-label":`Place disc at row ${o+1}, column ${l+1}`}),e.jsx("div",{className:`absolute inset-[10%] rounded-full ${n.cell.hole} shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] dark:shadow-[inset_0_2px_4px_rgba(0,0,0,1)] opacity-60 pointer-events-none`}),k&&e.jsx("div",{className:`absolute w-1.5 h-1.5 ${n.cell.starPoint} rounded-full shadow-[inset_0_1px_2px_rgba(0,0,0,0.2)] pointer-events-none`}),e.jsx("div",{className:"w-[96%] h-[96%] relative flex items-center justify-center z-10 pointer-events-none preserve-3d",children:e.jsx(de,{owner:d,isValidMove:x,isFlipping:c,theme:n,blackIcon:m,whiteIcon:h})})]})},(t,a)=>t.cell.owner===a.cell.owner&&t.cell.isValidMove===a.cell.isValidMove&&t.cell.isFlipping===a.cell.isFlipping&&t.isClickable===a.isClickable&&t.boardSize===a.boardSize&&t.theme.name===a.theme.name&&t.blackIcon===a.blackIcon&&t.whiteIcon===a.whiteIcon),me=p.memo(()=>{const t=j(f=>f.board),a=j(f=>f.placeDisc),s=j(f=>f.status),r=j(f=>f.themeId),n=j(f=>f.characterSetId),m=L(f=>f.enableTilt),h=R[r],o=p.useMemo(()=>E.find(f=>f.id===n)||E[0],[n]),l=t.length,d=s===g.PLAYING,x=p.useCallback((f,y)=>{a(f,y)},[a]),c=p.useMemo(()=>({width:"100%",maxWidth:"100%",aspectRatio:"1/1",transform:m?"rotateX(20deg)":"none"}),[m]),b=p.useMemo(()=>({gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`,gridTemplateRows:`repeat(${l}, minmax(0, 1fr))`,touchAction:"none"}),[l]),u=r==="KIDS",k=u?o.p1:void 0,T=u?o.p2:void 0;return e.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4 perspective-1000",children:e.jsxs("div",{className:`
                    relative 
                    ${h.board.container}
                    rounded-xl 
                    border-4
                    p-1.5 sm:p-2
                    preserve-3d
                    will-change-transform
                `,style:c,children:[e.jsx("div",{className:`absolute inset-0 ${h.board.surface} rounded-lg pointer-events-none`}),e.jsx("div",{className:`
                        grid gap-1 sm:gap-2 w-full h-full
                        ${h.board.grid}
                        rounded-lg
                        p-0.5 sm:p-1
                        border
                    `,style:b,children:t.map((f,y)=>f.map((S,I)=>e.jsx(ce,{cell:S,isClickable:d,onPlace:x,boardSize:l,theme:h,blackIcon:k,whiteIcon:T},`${y}-${I}`)))})]})})}),z=p.memo(({playerId:t,alignment:a})=>{const s=j(u=>u.players[t]),r=j(u=>u.turn),n=j(u=>u.winner),m=j(u=>u.themeId),h=j(u=>u.characterSetId),o=R[m].playerPanel[t],l=p.useMemo(()=>E.find(u=>u.id===h)||E[0],[h]),d=p.useMemo(()=>r==="BLACK"&&t===i.ONE||r==="WHITE"&&t===i.TWO,[r,t]),x=p.useMemo(()=>n==="BLACK"&&t===i.ONE||n==="WHITE"&&t===i.TWO,[n,t]),c=a==="right",b=m==="KIDS"?t===i.ONE?l.p1:l.p2:null;return e.jsxs("div",{className:`
        flex items-center gap-3 md:gap-4
        transition-all duration-300
        ${c?"flex-row-reverse text-right":"flex-row text-left"}
        ${d?"opacity-100 scale-105":"opacity-60 grayscale-[0.3] scale-100"}
      `,children:[e.jsxs("div",{className:`
          relative
          w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl
          flex items-center justify-center
          bg-gradient-to-br ${o.gradient}
          shadow-lg ${d?o.shadowColor:"shadow-none"}
          border-2 ${d?"border-current":o.borderColor}
          ${o.textColor}
          transition-all duration-300
        `,children:[b?e.jsx("span",{className:"text-xl md:text-3xl select-none font-emoji",children:b}):e.jsx("div",{className:`
                w-6 h-6 md:w-8 md:h-8 rounded-full shadow-inner 
                ${t===i.ONE?"bg-black/30 border-black/10":"bg-white/30 border-white/20"}
                border
            `}),x&&e.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce font-emoji",children:w("üëë")})]}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("h2",{className:`text-sm md:text-lg font-bold ${o.textColor} leading-tight transition-colors`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("div",{className:`
               px-2 py-0.5 rounded-md 
               bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-300
               text-[10px] md:text-xs font-mono
               transition-colors
             `,children:["Count: ",e.jsx("span",{className:"text-slate-900 dark:text-white font-bold",children:s.score})]}),d&&!n&&e.jsx("div",{className:`
                 hidden sm:block px-2 py-0.5 rounded-full 
                 bg-teal-600 text-white 
                 text-[10px] font-bold uppercase tracking-wider animate-pulse
               `,children:"Turn"})]})]})]})}),xe=()=>{const{status:t,winner:a,startGame:s,resetGame:r,players:n,gameMode:m,themeId:h}=j(),{setView:o}=L(),[l,d]=p.useState(!1);if(p.useEffect(()=>{t===g.WON||t===g.DRAW?d(!0):d(!1)},[t]),!l||t!==g.WON&&t!==g.DRAW)return null;const x=a==="BLACK"?i.ONE:i.TWO,c=R[h].playerPanel[x],b=()=>{r(),o(F.HOME)},u=()=>{s(m)},k=x?n[x].name:"";return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-[2px] transition-opacity duration-300",onClick:()=>d(!1)}),e.jsxs("div",{className:"relative bg-white/50 dark:bg-slate-800/50 backdrop-blur-xl rounded-3xl p-8 max-w-md w-full text-center shadow-2xl border border-white/40 dark:border-slate-700/40 animate-bounce-in transform transition-all duration-300",children:[e.jsx("button",{onClick:()=>d(!1),className:"absolute top-4 right-4 p-2 text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white transition-colors bg-white/50 dark:bg-black/20 rounded-full",title:"Close to View Board",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),t===g.WON&&c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`mx-auto w-24 h-24 rounded-full bg-gradient-to-br ${c.gradient} flex items-center justify-center mb-6 shadow-xl border-4 border-white/30 dark:border-slate-600/30`,children:e.jsx("span",{className:"text-5xl font-emoji",children:a==="BLACK"?w("‚ö´"):w("‚ö™")})}),e.jsxs("h2",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 uppercase tracking-tight drop-shadow-sm",children:[k," Wins!"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-8 font-medium",children:"Total domination of the board."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto w-24 h-24 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-5xl font-emoji",children:w("ü§ù")})}),e.jsx("h2",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 drop-shadow-sm",children:"Draw!"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-8 font-medium",children:"A perfectly balanced game."})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(C,{onClick:u,size:"lg",className:"w-full !bg-teal-600 hover:!bg-teal-500 shadow-lg",children:"Play Again"}),e.jsx(C,{onClick:b,variant:"secondary",className:"w-full !bg-white/50 dark:!bg-black/20 hover:!bg-white/80 dark:hover:!bg-black/40",children:"Back to Menu"})]})]})]})},Y=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),he=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),be=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 md:w-5 md:h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),ge=()=>{const{status:t,startGame:a,resumeGame:s,resetGame:r,syncPlayers:n,turn:m,winner:h,noMovesAlert:o,dismissAlert:l,hasSavedGame:d,gameMode:x,boardSize:c,themeId:b,setTheme:u,characterSetId:k,setCharacterSet:T}=j(),{setView:f,players:y}=L(),[S,I]=p.useState(c||A),[G,W]=p.useState(!1),[N,O]=p.useState("PVP");p.useEffect(()=>{n(y)},[y,n]),p.useEffect(()=>{c&&I(c)},[c]);const B=()=>{r(),f(F.HOME)},K=()=>{r()},Q=()=>{a(x,S)};return t===g.IDLE?G?e.jsx(ee,{gameId:"reversi",onBack:()=>W(!1)}):e.jsxs("div",{className:"flex flex-col h-screen w-full bg-slate-50 dark:bg-[#0f172a] text-slate-900 dark:text-white relative overflow-hidden transition-colors duration-500",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-40",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-teal-400/20 dark:bg-teal-900/20 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-400/20 dark:bg-indigo-900/20 rounded-full blur-[100px]"})]}),e.jsxs("header",{className:"shrink-0 h-16 md:h-20 px-4 md:px-8 flex items-center justify-center z-30 bg-white/50 dark:bg-slate-900/50 backdrop-blur-md sticky top-0 border-b border-slate-200/50 dark:border-white/5",children:[e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(C,{variant:"icon",size:"sm",onClick:B,title:"Return to Menu",children:e.jsx(Y,{})})}),e.jsx("div",{className:"flex-1"})]}),e.jsxs("div",{className:"flex-1 w-full overflow-y-auto",children:[e.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 text-center relative z-20 p-4 md:p-8 pb-32",children:[e.jsxs("div",{className:"space-y-4 animate-fade-in pt-4",children:[e.jsx("div",{className:`
                                inline-flex items-center justify-center w-24 h-24 rounded-[2rem] shadow-2xl mb-4 rotate-6 border-[6px] 
                                ${b==="KIDS"?"bg-indigo-50 border-indigo-200 dark:bg-slate-800 dark:border-slate-700":"bg-white dark:bg-slate-800 border-teal-500"}
                                transition-colors duration-300
                            `,children:e.jsx("span",{className:"text-6xl font-emoji",children:b==="KIDS"?w("üêß"):w("‚ö™")})}),e.jsx("h1",{className:"text-5xl md:text-6xl font-black text-slate-900 dark:text-white tracking-tighter drop-shadow-sm",children:"Reversi"}),e.jsx("p",{className:"text-lg md:text-xl text-slate-600 dark:text-slate-400 font-medium max-w-lg mx-auto leading-relaxed",children:"Flip opponent pieces to your color. Strategy meets fun!"})]}),d&&e.jsxs("div",{className:"animate-pop",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-xl border-l-8 border-teal-500 flex flex-col sm:flex-row items-center justify-between gap-6 max-w-2xl mx-auto ring-1 ring-slate-900/5",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white",children:"Game in Progress"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:["Resume: ",e.jsxs("span",{className:"font-bold text-teal-600 dark:text-teal-400",children:[c,"x",c," Board"]})]})]}),e.jsx(C,{onClick:s,size:"lg",className:"w-full sm:w-auto !bg-teal-500 hover:!bg-teal-400 whitespace-nowrap !rounded-xl !py-4 !px-8 text-lg shadow-lg shadow-teal-500/30",children:"Continue Game"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-8 mb-4 max-w-2xl mx-auto",children:[e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Or Start New Game"}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"})]})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"bg-slate-200 dark:bg-slate-800 p-1.5 rounded-2xl inline-flex shadow-inner",children:[e.jsx("button",{onClick:()=>u("KIDS"),className:`
                                        px-6 py-2.5 rounded-xl text-sm font-bold uppercase tracking-wider transition-all
                                        ${b==="KIDS"?"bg-indigo-500 text-white shadow-md transform scale-105":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}
                                    `,children:"üêß Kiddo"}),e.jsx("button",{onClick:()=>u("STANDARD"),className:`
                                        px-6 py-2.5 rounded-xl text-sm font-bold uppercase tracking-wider transition-all
                                        ${b==="STANDARD"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-md transform scale-105":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}
                                    `,children:"‚ö™ Classic"})]})}),b==="KIDS"&&e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Choose Characters"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:E.map(v=>e.jsxs("button",{onClick:()=>T(v.id),className:`
                                                group flex flex-col items-center gap-2 p-4 rounded-2xl border-2 transition-all font-emoji
                                                ${k===v.id?"bg-indigo-50 dark:bg-indigo-900/30 border-indigo-500 shadow-md transform scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-700"}
                                            `,children:[e.jsxs("div",{className:"flex items-center gap-2 text-4xl group-hover:scale-110 transition-transform",children:[e.jsx("span",{children:v.p1}),e.jsx("span",{className:"text-base text-slate-300 font-sans",children:"vs"}),e.jsx("span",{children:v.p2})]}),e.jsx("span",{className:`text-xs font-bold uppercase tracking-wide font-sans ${k===v.id?"text-indigo-600 dark:text-indigo-400":"text-slate-500"}`,children:v.name})]},v.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16 items-start text-left max-w-4xl mx-auto",children:[e.jsxs("div",{className:"space-y-6 animate-fade-in",style:{animationDelay:"100ms"},children:[e.jsxs("div",{className:"flex items-center gap-4 justify-center md:justify-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 flex items-center justify-center font-bold text-sm",children:"1"}),e.jsx("h2",{className:"text-lg font-black uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Board Size"})]}),e.jsx("div",{className:"flex flex-col gap-3",children:[{s:5,label:"Junior",desc:"Quick & Fun",color:"bg-amber-400",ring:"peer-checked:ring-amber-400"},{s:6,label:"Pro",desc:"Balanced",color:"bg-emerald-400",ring:"peer-checked:ring-emerald-400"},{s:8,label:"Master",desc:"Classic Strategy",color:"bg-indigo-400",ring:"peer-checked:ring-indigo-400"}].map(v=>e.jsxs("label",{className:"relative group cursor-pointer",children:[e.jsx("input",{type:"radio",name:"boardSize",className:"peer sr-only",checked:S===v.s,onChange:()=>I(v.s)}),e.jsxs("div",{className:`
                                                p-4 rounded-2xl border-2 border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-800 
                                                transition-all duration-200 flex items-center gap-4
                                                peer-checked:border-transparent peer-checked:ring-2 peer-checked:ring-offset-2 dark:peer-checked:ring-offset-slate-900 ${v.ring}
                                                peer-checked:shadow-md hover:bg-slate-50 dark:hover:bg-slate-700/50
                                            `,children:[e.jsxs("div",{className:`
                                                    w-12 h-12 rounded-xl flex items-center justify-center text-lg font-black text-white shadow-sm
                                                    ${v.color} transform group-hover:scale-110 transition-transform
                                                `,children:[v.s,"x"]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900 dark:text-white text-lg",children:v.label}),e.jsx("div",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:v.desc})]}),S===v.s&&e.jsx("div",{className:"ml-auto text-xl text-slate-900 dark:text-white font-bold animate-bounce-in",children:"‚úì"})]})]},v.s))})]}),e.jsxs("div",{className:"space-y-6 animate-fade-in",style:{animationDelay:"200ms"},children:[e.jsxs("div",{className:"flex items-center gap-4 justify-center md:justify-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 flex items-center justify-center font-bold text-sm",children:"2"}),e.jsx("h2",{className:"text-lg font-black uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Game Mode"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("button",{onClick:()=>O("PVP"),className:`
                                            group relative overflow-hidden p-6 rounded-[2rem] border-2 transition-all duration-300 text-left
                                            ${N==="PVP"?"bg-white dark:bg-slate-800 border-pink-500 ring-4 ring-pink-500/20 shadow-xl scale-[1.02]":"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 hover:border-pink-300"}
                                        `,children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-pink-100 dark:bg-pink-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-pink-500 text-white flex items-center justify-center text-3xl shadow-lg group-hover:rotate-6 transition-transform font-emoji",children:w("üë•")}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Vs Friend"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium text-sm",children:"Pass & Play"})]}),N==="PVP"&&e.jsx("div",{className:"ml-auto text-2xl text-pink-500 font-bold animate-bounce-in",children:"‚úì"})]})]}),e.jsxs("button",{onClick:()=>O("PVB"),className:`
                                            group relative overflow-hidden p-6 rounded-[2rem] border-2 transition-all duration-300 text-left
                                            ${N==="PVB"?"bg-white dark:bg-slate-800 border-teal-500 ring-4 ring-teal-500/20 shadow-xl scale-[1.02]":"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 hover:border-teal-400"}
                                        `,children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-teal-100 dark:bg-teal-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-teal-500 text-white flex items-center justify-center text-3xl shadow-lg group-hover:-rotate-6 transition-transform font-emoji",children:w("ü§ñ")}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Vs Bot"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium text-sm",children:"Practice Mode"})]}),N==="PVB"&&e.jsx("div",{className:"ml-auto text-2xl text-teal-500 font-bold animate-bounce-in",children:"‚úì"})]})]})]})]})]})]}),e.jsx(D,{className:"md:hidden",onStart:()=>a(N,S),onHowToPlay:()=>W(!0),startLabel:"Start Game",startColorClass:N==="PVP"?"!bg-pink-500 hover:!bg-pink-400":"!bg-teal-500 hover:!bg-teal-400"})]}),e.jsx("div",{className:"hidden md:block w-full",children:e.jsx(D,{onStart:()=>a(N,S),onHowToPlay:()=>W(!0),startLabel:"Start Game",startColorClass:N==="PVP"?"!bg-pink-500 hover:!bg-pink-400":"!bg-teal-500 hover:!bg-teal-400"})})]}):e.jsxs("div",{className:"flex flex-col h-screen w-full bg-slate-50 dark:bg-[#0f172a] text-slate-900 dark:text-white relative overflow-hidden transition-colors duration-500",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-40",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-teal-400/20 dark:bg-teal-900/20 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-400/20 dark:bg-indigo-900/20 rounded-full blur-[100px]"})]}),e.jsxs("header",{className:"shrink-0 h-16 md:h-20 px-3 md:px-8 flex items-center justify-between z-30 bg-white/60 dark:bg-black/20 backdrop-blur-md border-b border-slate-200 dark:border-white/5 relative shadow-sm transition-colors duration-300",children:[e.jsx("div",{className:"flex-1 flex justify-start min-w-0",children:e.jsx(z,{playerId:i.ONE,alignment:"left"})}),e.jsxs("div",{className:"shrink-0 flex gap-2 mx-2",children:[e.jsx(C,{variant:"icon",size:"sm",onClick:K,title:"Back to Game Menu",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(he,{})}),e.jsx(C,{variant:"icon",size:"sm",onClick:Q,title:"Restart Game",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(be,{})}),e.jsx(C,{variant:"icon",size:"sm",onClick:B,title:"Return to Menu",className:"w-9 h-9 md:w-11 md:h-11 p-2",children:e.jsx(Y,{})})]}),e.jsx("div",{className:"flex-1 flex justify-end min-w-0",children:e.jsx(z,{playerId:i.TWO,alignment:"right"})})]}),e.jsx("main",{className:"flex-1 h-full w-full relative z-10 overflow-hidden",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center p-2 perspective-1000",children:e.jsx("div",{className:`
                        relative aspect-square 
                        portrait:w-full portrait:max-h-full
                        landscape:h-full landscape:max-w-full
                        flex items-center justify-center
                    `,children:e.jsx("div",{className:"w-full h-screen flex items-center justify-center animate-fade-in",children:e.jsx(me,{})})})})}),o&&!h&&e.jsx("div",{className:"absolute top-24 left-1/2 -translate-x-1/2 z-50 animate-bounce-in w-full px-4 max-w-sm",children:e.jsxs("div",{className:"bg-amber-100 text-amber-900 px-6 py-4 rounded-2xl shadow-xl font-bold flex items-center justify-between gap-3 border-l-4 border-amber-500",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"text-sm leading-tight",children:["No moves for ",m==="BLACK"?"Black":"White","!",e.jsx("br",{}),e.jsx("span",{className:"font-normal opacity-80",children:"Turn passed automatically."})]})]}),e.jsx("button",{onClick:l,className:"w-8 h-8 bg-black/5 rounded-full flex items-center justify-center hover:bg-black/10 transition-colors",children:"‚úï"})]})}),e.jsx(xe,{})]})};export{ge as ReversiGame};
