
<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#0f172a" />
    <meta name="description" content="A high-fidelity, 2.5D competitive strategy game suite." />
    <title>Arcade 2.5D</title>
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/808/808439.png" />
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/808/808439.png" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            }
          }
        }
      }
    </script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
      body {
        overflow: hidden;
        overscroll-behavior: none;
        touch-action: pan-y; /* Allow vertical scrolling (menus) but block horizontal/zoom. Game boards override this to 'none'. */
      }
      /* Default Emoji/Symbol Font Stack (Windows/Android/Linux) */
      .font-emoji {
        /* font-family: "Segoe UI Symbol", "DejaVu Sans", sans-serif; */
      }
      /* Apple Specific Override - Injected via JS class on body */
      body.is-apple .font-emoji {
        font-family: "Apple Symbols", "Segoe UI Symbol", "DejaVu Sans", sans-serif;
      }
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #1e293b;
      }
      ::-webkit-scrollbar-thumb {
        background: #475569;
        border-radius: 4px;
      }
      .preserve-3d {
        transform-style: preserve-3d;
        -webkit-transform-style: preserve-3d;
      }
      .perspective-1000 {
        perspective: 1000px;
        -webkit-perspective: 1000px;
      }
      .backface-hidden {
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
      }
      /* Reduce Motion / Disable Animations Mode / Performance Mode */
      /* 1. Kill timing */
      body.no-animations *,
      body.no-animations *::before,
      body.no-animations *::after {
        animation-duration: 0s !important;
        transition-duration: 0s !important;
        animation-delay: 0s !important;
        transition-delay: 0s !important;
        animation-iteration-count: 1 !important;
        scroll-behavior: auto !important;
      }
      /* 2. Kill Visual Effects */
      /* We disable shadows globally BUT we exempt elements with "inset" shadows (like board holes) 
         because removing them makes the 2.5D game boards look completely broken/flat. */
      body.no-animations *:not([class*="inset"]) {
        box-shadow: none !important;
      }
      body.no-animations *,
      body.no-animations *::before,
      body.no-animations *::after {
        text-shadow: none !important;
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
      }
      /* 3. Handle Glassmorphism Fallbacks (Theme Aware) */
      /* Light Mode Fallbacks */
      html:not(.dark) body.no-animations .backdrop-blur-md,
      html:not(.dark) body.no-animations .backdrop-blur-xl,
      html:not(.dark) body.no-animations .backdrop-blur-sm,
      html:not(.dark) body.no-animations .bg-white\/50,
      html:not(.dark) body.no-animations .bg-white\/60 {
        background-color: #ffffff !important;
        border: 1px solid #e2e8f0 !important; /* Slate 200 */
      }
      /* Dark Mode Fallbacks */
      html.dark body.no-animations .backdrop-blur-md,
      html.dark body.no-animations .backdrop-blur-xl,
      html.dark body.no-animations .backdrop-blur-sm,
      html.dark body.no-animations .bg-slate-900\/50,
      html.dark body.no-animations .bg-slate-900\/40 {
        background-color: #0f172a !important; /* Slate 900 */
        border: 1px solid #334155 !important; /* Slate 700 */
      }
      /* === GPU-Accelerated Animation Keyframes (Static Load) === */
      @keyframes bounce-in {
        0% { transform: scale(0) translateY(-100%); opacity: 0; }
        60% { transform: scale(1.1) translateY(10%); opacity: 1; }
        100% { transform: scale(1) translateY(0); }
      }
      .animate-bounce-in {
        animation: bounce-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        will-change: transform, opacity;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-fade-in {
        animation: fadeIn 0.4s ease-out forwards;
        will-change: transform, opacity;
      }
      @keyframes pop {
        0% { transform: scale(0.5); opacity: 0; }
        60% { transform: scale(1.1); opacity: 1; }
        100% { transform: scale(1); }
      }
      .animate-pop {
        animation: pop 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        will-change: transform, opacity;
      }
      @keyframes drop-rotate {
        0% { 
          transform: translateY(var(--drop-offset)) rotate(0deg); 
          opacity: 0; 
        }
        5% { opacity: 1; }
        75% { 
          transform: translateY(0) rotate(720deg); 
        }
        85% { 
          transform: translateY(-20%) rotate(720deg); 
        }
        100% { 
          transform: translateY(0) rotate(720deg); 
        }
      }
      .animate-drop-rotate {
        animation: drop-rotate 0.5s forwards;
        will-change: transform, opacity;
      }
      /* === Mobile Touch Optimizations === */
      /* Prevent text selection during gameplay */
      .touch-none {
        touch-action: none;
        -webkit-user-select: none;
        user-select: none;
        -webkit-touch-callout: none;
      }
      /* Improve tap responsiveness by removing 300ms delay */
      button, [role="button"], .cursor-pointer {
        touch-action: manipulation;
      }
      /* Hardware acceleration hints for animated elements */
      .will-change-transform {
        will-change: transform;
      }
      /* Optimize scrolling performance */
      .overflow-y-auto {
        -webkit-overflow-scrolling: touch;
        overscroll-behavior-y: contain;
      }

    </style>

  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react/": "https://esm.sh/react@^19.2.3/",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "zustand": "https://esm.sh/zustand@^5.0.10",
    "chess.js": "https://esm.sh/chess.js@1.0.0-beta.8",
    "pixi.js": "https://esm.sh/pixi.js@8.2.6?bundle",
    "three": "https://esm.sh/three@0.160.0",
    "three/addons/": "https://esm.sh/three@0.160.0/examples/jsm/",
    "three/": "https://esm.sh/three@^0.182.0/",
    "vite": "https://esm.sh/vite@^7.3.1",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.4",
    "vite-plugin-pwa": "https://esm.sh/vite-plugin-pwa@^1.2.0",
    "workbox-precaching": "https://esm.sh/workbox-precaching@^7.4.0",
    "workbox-core": "https://esm.sh/workbox-core@^7.4.0",
    "canvas-confetti": "https://esm.sh/canvas-confetti@1.9.2"
  }
}
</script>
  <script type="module" crossorigin src="/assets/index-C6bnjAcI.js"></script>
<script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script></head>
  <body class="h-screen w-screen bg-slate-50 dark:bg-[#0f172a] text-slate-900 dark:text-white transition-colors duration-300">
    <div id="root"></div>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .then(registration => {
              console.log('SW registered: ', registration);
            })
            .catch(registrationError => {
              console.log('SW registration failed: ', registrationError);
            });
        });
      }
    </script>
  </body>
</html>
